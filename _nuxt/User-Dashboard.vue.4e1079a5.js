import V from"./Icon.ea3396ff.js";import{_ as S}from"./UserAvatar.vue.7b3ed467.js";import U from"./LoginForm.6bb2694f.js";import j from"./theme-toggle.be673fb6.js";import{d as I,X as K,G as N,r as u,W as R,b as t,c as o,Y as p,g as a,f as x,e,t as l,D as W,H as E,n as $}from"./entry.db0b0373.js";const F=["onClick"],H={class:"absolute top-2 right-2"},J={key:1},P=e("h1",{class:"text-2xl font-semibold ml-6"},"User Dashboard",-1),T={class:"relative flex justify-center items-center"},X={class:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2"},Y={class:"text-lg font-semibold bg-base-200 border-accent rounded-2xl border p-2 pt-1 pb-1"},q={class:"flex items-center space-x-4 m-2"},A={class:"text-lg font-medium m-2 mt-4 p-1 pb-0"},O={key:0,class:"text-sm text-gray-500 ml-2"},Q={class:"flex space-x-4 mt-2"},Z={class:"flex items-center space-x-2"},ee={key:0},te={key:1},se={class:"flex flex-row"},oe={key:2,class:"flex flex-row items-center justify-between h-full"},ae={class:"flex flex-row items-center space-x-4"},le={class:"flex items-center space-x-2"},ne=["onClick"],me=I({__name:"User-Dashboard",setup(ie){const d=K(),n=N(()=>d.user),i=N(()=>d.isLoggedIn),r=u(!1),s=u(!1),g=u(!1),z=u(""),_=()=>{s.value=!s.value};R(i,m=>{m&&(r.value=!1)});const D=()=>{i.value?v():(r.value=!0,s.value&&_())},v=async()=>{try{g.value=!0,await d.logout()}catch{z.value="Failed to logout. Please try again."}finally{g.value=!1}};return(m,c)=>{var y,k,w,C,L,B;const f=V,h=S,M=U,b=j;return t(),o("div",{class:$(["bg-base-200 p-2 rounded-2xl relative",{"h-32":s.value}])},[s.value?x("",!0):(t(),o("button",{key:0,class:"absolute top-1 left-1 z-10",onClick:p(_,["stop"])},[a(f,{name:"game-icons:expand",class:"text-lg"})],8,F)),e("span",H,"Role: "+l(((y=n.value)==null?void 0:y.Role)||"Guest"),1),s.value?(t(),o("div",oe,[e("div",{class:"flex flex-row items-center space-x-2 cursor-pointer",onClick:c[2]||(c[2]=p(G=>s.value?_():null,["stop"]))},[a(h,{class:"w-12 h-12"}),e("span",null,l(((L=n.value)==null?void 0:L.username)||"Kind Guest"),1)]),e("div",ae,[e("div",le,[a(f,{name:"tdesign:bean",class:"text-2xl"}),e("span",null,l(((B=n.value)==null?void 0:B.mana)||0),1)]),e("button",{class:$(["rounded-lg text-white text-lg",i.value?"bg-warning":"bg-primary"]),onClick:p(D,["stop"])},l(i.value?"Logout":"Login"),11,ne),a(b,{class:"flex flex-row"})])])):(t(),o("div",J,[P,e("div",T,[a(h),e("div",X,[e("h2",Y,l(((k=n.value)==null?void 0:k.username)||"Kind Guest"),1)])]),e("div",q,[e("div",null,[e("p",A,[W(" Welcome, "+l(((w=n.value)==null?void 0:w.username)||"Guest")+" ",1),i.value?x("",!0):(t(),o("span",O,"(Not logged in)"))]),e("div",Q,[e("div",Z,[a(f,{name:"tdesign:bean",class:"text-lg"}),e("span",null,"Jellybeans: "+l(((C=n.value)==null?void 0:C.mana)||0),1)])])]),i.value?(t(),o("div",ee,[e("button",{class:"bg-warning p-2 rounded-lg text-white text-lg",onClick:v},"Logout")])):(t(),o("div",te,[e("button",{class:"bg-primary p-2 rounded-lg text-white text-lg",onClick:c[0]||(c[0]=G=>r.value=!0)},"Login")]))]),r.value?(t(),E(M,{key:0,onClose:c[1]||(c[1]=G=>r.value=!1)})):x("",!0),e("div",se,[a(b,{class:"flex flex-row"})])]))],2)}}});export{me as _};
