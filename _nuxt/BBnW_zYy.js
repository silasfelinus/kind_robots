import{r as i,$ as x,H as y,c as o,e as r,V as _,W as w,f as s,F as E,a5 as T,t as g,a_ as R,g as v,a1 as D}from"./CH0slHa8.js";import{u as M,S as h}from"./Eh43hN4A.js";const O={class:"bg-base p-8"},V={class:"space-y-4"},C={class:"label-text capitalize"},N=["onUpdate:modelValue","type","min","step","max"],F={class:"mt-4 text-xl"},I={key:0,class:"mt-4"},U=s("div",{class:"loader"},null,-1),B=[U],$={key:1,class:"mt-4"},j=["src"],W={__name:"MakeArt",setup(z){const u=i(""),n=M(),f=x(),c=i(null),d=i(!1),b=y(()=>n.message),l=i({seed:-1,sampler_name:"DDIM",batch_size:1,n_iter:1,steps:20,cfg_scale:7,width:512,height:512}),S=async()=>{var m,a;try{d.value=!0,n.setStatus(h.INFO,"Submitting your text...");const e={text:u.value,settings:l.value},t=await fetch("https://cafefred.purrsalon.com/sdapi/v1/txt2img",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`API error: ${t.statusText}`);const p=await t.json();c.value=`data:image/png;base64,${p.images[0]}`,n.setStatus(h.SUCCESS,"Successfully submitted!")}catch(e){console.error(e);const t=((a=(m=e.response)==null?void 0:m.data)==null?void 0:a.message)||e.message||"Failed to submit text";f.handleError(()=>{throw e},D.NETWORK_ERROR,t),n.setStatus(h.ERROR,t)}finally{d.value=!1}};return(m,a)=>(o(),r("div",O,[_(s("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>u.value=e),class:"input input-bordered w-full mb-4",placeholder:"Enter your text here"},null,512),[[w,u.value]]),s("div",V,[(o(!0),r(E,null,T(l.value,(e,t)=>(o(),r("div",{key:t,class:"label"},[s("span",C,g(t)+":",1),_(s("input",{"onUpdate:modelValue":p=>l.value[t]=p,type:typeof e,class:"input input-bordered",min:t==="width"||t==="height"?256:void 0,step:t==="width"||t==="height"?64:void 0,max:t==="width"||t==="height"?1024:void 0},null,8,N),[[R,l.value[t]]])]))),128))]),s("button",{class:"btn btn-primary mt-4",onClick:S},"Submit"),s("p",F,g(b.value),1),d.value?(o(),r("div",I,B)):v("",!0),c.value?(o(),r("div",$,[s("img",{src:c.value,alt:"Generated Image",class:"max-w-full h-auto"},null,8,j)])):v("",!0)]))}};export{W as default};
