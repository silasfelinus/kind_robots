import{_ as T}from"./MatchLeaderboard.vue.f7e5691d.js";import{_ as G,c as L}from"./milestone-reward.vue.c3e4bcc7.js";import{d as U,X as A,G as h,r as l,o as F,W as I,b as n,c as r,e as t,g as W,Z as z,ai as K,F as $,a5 as D,t as g,H as X,f as b,n as P,D as Y,p as Z,i as q,k as J}from"./entry.61d3d36f.js";import"./Icon.a75aaf64.js";const O=""+globalThis.__publicAssetsURL("images/kindtitle.webp"),y=m=>(Z("data-v-10e92c18"),m=m(),q(),m),Q={class:"container mx-auto px-4 py-8 min-h-screen flex flex-col items-center space-y-6"},ee={class:"text-center space-y-2"},te=y(()=>t("h1",{class:"text-4xl font-bold"},"Kind Robots Memory Game",-1)),ae=y(()=>t("p",{class:"text-gray-600"},"Match the images and test your memory!",-1)),se={class:"difficulty-controls"},oe=y(()=>t("label",{for:"difficulty"},"Select Difficulty: ",-1)),le=["value"],ne={class:"game-board w-full max-w-4xl flex flex-wrap justify-center items-center"},re={key:0,class:"loader mt-4"},ie=["onClick"],ce=y(()=>t("img",{class:"card-back absolute inset-0 w-full h-full object-cover",src:O,alt:"Memory Card"},null,-1)),ue=["src","alt"],de={class:"game-controls mt-4 flex flex-col items-center space-y-2","aria-live":"polite",role:"status"},me={key:1,class:"mt-2 space-y-2 text-center"},fe=U({__name:"MemoryGame",setup(m){var E;const f=A(),V=h(()=>f.user);h(()=>f.username);const x=h(()=>f.matchRecord),j=()=>{L({particleCount:100,spread:70,origin:{y:.6}})},v=l([]),M=[{label:"Easy",value:8},{label:"Medium",value:12},{label:"Hard",value:16}],p=l(M[0]),w=l(!1),i=l(null),k=l(!1),_=l(!0);function N(){return typeof window<"u"}const c=l(0);if(N()){const e=(E=V.value)==null?void 0:E.matchRecord;e&&(c.value=Number(e))}let s=null;async function R(){try{_.value=!0,w.value=!1;const e=Math.ceil(p.value.value/2),d=await(await fetch(`/api/galleries/random/count/${e}`)).json();if(d.images.length!==e)throw new Error("Received an unexpected number of images.");v.value=d.images.concat(d.images).map((C,a)=>({id:a,galleryName:"",imagePath:C,flipped:!1,matched:!1})).sort(()=>.5-Math.random()),_.value=!1}catch(e){_.value=!1,console.error("Error generating images:",e),i.value={type:"error",message:"Error generating images. Please try again later."}}}const o=l(0);function B(e){e.flipped||e.matched||(e.flipped=!0,s?s&&s.imagePath===e.imagePath?(e.matched=!0,s.matched=!0,o.value+=10,setTimeout(()=>{s=null},500),v.value.every(u=>u.matched)&&(w.value=!0,j(),(x.value<o.value||x.value===null)&&f.updateMatchRecord(o.value),o.value>=50&&(k.value=!0),(o.value>c.value||o.value>x.value)&&(c.value=o.value,N()&&localStorage.setItem("highScore",c.value.toString())))):(o.value-=5,setTimeout(()=>{e.flipped=!1,s&&(s.flipped=!1),s=null},500)):s=e)}const H=h(()=>{const e="notification py-2 px-4 rounded-lg mb-2";return i.value?i.value.type==="error"?`${e} bg-red-200 text-red-700`:`${e} bg-green-200 text-green-700`:e});function S(){v.value.forEach(e=>{e.flipped=!1,e.matched=!1}),o.value=0,s=null,R()}return F(R),I(p,S),(e,u)=>{const d=T,C=G;return n(),r("div",Q,[t("header",ee,[te,ae,W(d),t("div",se,[oe,z(t("select",{id:"difficulty","onUpdate:modelValue":u[0]||(u[0]=a=>p.value=a)},[(n(),r($,null,D(M,a=>t("option",{key:a.label,value:a},g(a.label),9,le)),64))],512),[[K,p.value]]),t("button",{class:"rounded-2xl text-white bg-primary p-2 m-1 border",onClick:S},"Start New Game"),k.value?(n(),X(C,{key:0,id:5})):b("",!0)])]),t("div",ne,[_.value?(n(),r("div",re)):b("",!0),(n(!0),r($,null,D(v.value,a=>(n(),r("div",{key:a.id,class:"gallery-display m-4 hover:scale-105 transform transition-transform duration-300 relative rounded-xl overflow-hidden w-screen cursor-pointer",onClick:ve=>B(a)},[t("div",{class:P({flipped:a.flipped||a.matched})},[ce,t("img",{class:"card-front absolute inset-0 w-full h-full object-cover",src:a.imagePath,alt:a.galleryName},null,8,ue)],2)],8,ie))),128))]),t("div",de,[i.value?(n(),r("div",{key:0,class:P(H.value)},g(i.value.message),3)):b("",!0),t("div",null,"Score: "+g(o.value),1),t("div",null,"High Score: "+g(c.value),1),w.value?(n(),r("div",me,[Y(" Congratulations! You've won! "),t("button",{class:"btn btn-info mt-2 px-4 py-2 bg-blue-500 text-default rounded hover:bg-blue-600 focus:outline-none focus:ring focus:ring-blue-200 transition-colors",onClick:S}," Play Again? ")])):b("",!0)])])}}});const be=J(fe,[["__scopeId","data-v-10e92c18"]]);export{be as default};
