import{d as N,a0 as S,a1 as R,r as x,I as U,c as d,e as i,N as l,h as f,g,Y as V,f as e,W as v,X as y,a2 as C,w as b,k as m,t as T,a3 as w,$ as B,E as M,p as O,j,l as D}from"./BwHe1LQq.js";const o=c=>(O("data-v-175ade38"),c=c(),j(),c),F={class:"flex flex-col items-center p-4 rounded-2xl shadow-lg transition-all duration-300 w-full max-w-md mx-auto"},P={key:0,class:"text-center text-info"},W=o(()=>e("div",null,"Loading, please wait...",-1)),$=["autocomplete"],q={class:"mb-2 relative group"},A=o(()=>e("label",{for:"login",class:"block text-sm mb-1"},"Login:",-1)),H=o(()=>e("div",{class:"absolute right-2 bottom-2 text-xs text-gray-500 group-hover:float-tooltip"}," Login ",-1)),K={class:"mb-2 relative group"},X=o(()=>e("label",{for:"password",class:"block text-sm mb-1"},"Password (optional):",-1)),Y=o(()=>e("div",{class:"absolute right-2 bottom-2 text-xs text-gray-500 group-hover:float-tooltip"}," Password (optional) ",-1)),z={class:"flex items-center justify-between"},G=o(()=>e("label",{for:"stayLoggedIn",class:"text-sm"},"Stay Logged in",-1)),J=o(()=>e("button",{type:"submit",class:"bg-info text-default py-1 px-3 rounded"}," Login ",-1)),Q={class:"text-center mt-2"},Z={key:2,class:"text-warning mt-2 w-full text-center"},ee={key:0},te={class:"mt-2"},oe={class:"text-accent underline"},se=N({__name:"LoginForm",setup(c){const t=S(),s=R(),u=x(""),_=x(""),L=U(()=>t.isLoggedIn),p=x(!1),I=async()=>{s.clearError(),p.value=!1;try{const a=await t.login(u.value,_.value||"");a.success&&t.stayLoggedIn?t.setStayLoggedIn(!0):(s.setError(w.AUTH_ERROR,a.message),a.message.includes("User not found")&&(p.value=!0))}catch(a){s.setError(w.UNKNOWN_ERROR,a)}},k=()=>{u.value="",_.value="",s.clearError(),p.value=!1};return(a,n)=>{const E=B,h=M;return d(),i("div",F,[l(t).loading?(d(),i("div",P,[f(E,{name:"tabler:loader",class:"animate-spin text-lg mb-2"}),W])):g("",!0),L.value?g("",!0):(d(),i("form",{key:1,class:"space-y-4 w-full",autocomplete:l(t).stayLoggedIn?"on":"off",onSubmit:V(I,["prevent"])},[e("div",q,[A,v(e("input",{id:"login","onUpdate:modelValue":n[0]||(n[0]=r=>u.value=r),type:"text",autocomplete:"username",class:"w-full p-2 border rounded",required:""},null,512),[[y,u.value]]),H]),e("div",K,[X,v(e("input",{id:"password","onUpdate:modelValue":n[1]||(n[1]=r=>_.value=r),type:"password",autocomplete:"current-password",class:"w-full p-2 border rounded"},null,512),[[y,_.value]]),Y]),e("div",z,[e("div",null,[v(e("input",{id:"stayLoggedIn","onUpdate:modelValue":n[2]||(n[2]=r=>l(t).stayLoggedIn=r),type:"checkbox",class:"mr-2"},null,512),[[C,l(t).stayLoggedIn]]),G]),J]),e("div",Q,[f(h,{to:"/register",class:"text-accent underline"},{default:b(()=>[m(" Register ")]),_:1})])],40,$)),l(s).message?(d(),i("div",Z,[m(T(l(s).message)+" ",1),p.value?(d(),i("div",ee,[e("div",te,[e("button",oe,[f(h,{to:"/register",class:"text-accent underline"},{default:b(()=>[m(" Register ")]),_:1})]),m(" or "),e("button",{class:"text-accent underline",onClick:k}," Try a different login ")])])):g("",!0)])):g("",!0)])}}}),ne=D(se,[["__scopeId","data-v-175ade38"]]);export{ne as default};
