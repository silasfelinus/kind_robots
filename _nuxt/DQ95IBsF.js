import{d as x,aB as M,aG as V,I as i,r as v,V as w,c as u,e as r,f as l,F as p,a9 as m,t as d,k as I,W as g,X as S,aH as k,aI as T}from"./NJWOSLyt.js";const B={class:"live-chat-window bg-base-200 rounded-2xl p-4 max-h-400"},b={class:"chat-messages overflow-y-auto max-h-300"},P={class:"chat-input mt-4"},W={class:"channel-selector mt-4"},A=["value"],K=x({__name:"PitchChat",setup(D){const f=M(),o=V(),h=i(()=>{var e;return((e=f.selectedPitch)==null?void 0:e.channelId)||0}),t=i(()=>o.channels),c=v(""),s=v(h.value),y=i(()=>{console.log("Type:",typeof t.value,"Value:",t.value);const e=t.value.find(n=>n.id===s.value);return(e==null?void 0:e.messages)||[]}),_=()=>{c.value.trim()!==""&&(Array.isArray(t.value)&&t.value.find(n=>n.id===s.value))&&(o.createMessage({sender:"user",recipient:"recipient",channelId:s.value,content:c.value,userId:0}),c.value="")},C=()=>{o.setCurrentChannel(s.value),o.fetchCurrentChannelWithMessages(s.value)};return w(h,e=>{s.value=e,o.fetchCurrentChannelWithMessages(e),console.log("Type:",typeof t.value,"Value:",t.value)}),(e,n)=>(u(),r("div",B,[l("div",b,[(u(!0),r(p,null,m(y.value,a=>(u(),r("div",{key:a.id,class:"chat-message"},[l("strong",null,d(a.sender)+":",1),I(" "+d(a.content),1)]))),128))]),l("div",P,[g(l("input",{"onUpdate:modelValue":n[0]||(n[0]=a=>c.value=a),type:"text",placeholder:"Type your message...",onKeyup:k(_,["enter"])},null,544),[[S,c.value]])]),l("div",W,[g(l("select",{"onUpdate:modelValue":n[1]||(n[1]=a=>s.value=a),onChange:C},[(u(!0),r(p,null,m(t.value,a=>(u(),r("option",{key:a.id,value:a.id},d(a.label),9,A))),128))],544),[[T,s.value]])])]))}});export{K as default};
