import{I as O,as as n,ad as $,at as x,au as C}from"./DJsSOPwi.js";import{u as E}from"./Cp2jq9Gf.js";function R(o,r,c){const[t={},u]=typeof r=="string"?[{},r]:[r,c],e=O(()=>n(o)),s=t.key||$([u,typeof e.value=="string"?e.value:"",...L(t)]);if(!s||typeof s!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+s);if(!o)throw new Error("[nuxt] [useFetch] request is missing.");const i=s===u?"$f"+s:s;if(!t.baseURL&&typeof e.value=="string"&&e.value[0]==="/"&&e.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:y,lazy:d,default:b,transform:g,pick:w,watch:h,immediate:v,getCachedData:_,deep:k,dedupe:D,...T}=t,l=x({...C,...T,cache:typeof t.cache=="boolean"?void 0:t.cache}),F={server:y,lazy:d,default:b,transform:g,pick:w,immediate:v,getCachedData:_,deep:k,dedupe:D,watch:h===!1?[]:[l,e,...h||[]]};let a;return E(i,()=>{var m;(m=a==null?void 0:a.abort)==null||m.call(a),a=typeof AbortController<"u"?new AbortController:{};const p=n(t.timeout);let f;return p&&(f=setTimeout(()=>a.abort(),p),a.signal.onabort=()=>clearTimeout(f)),(t.$fetch||globalThis.$fetch)(e.value,{signal:a.signal,...l}).finally(()=>{clearTimeout(f)})},F)}function L(o){var c;const r=[((c=n(o.method))==null?void 0:c.toUpperCase())||"GET",n(o.baseURL)];for(const t of[o.params||o.query]){const u=n(t);if(!u)continue;const e={};for(const[s,i]of Object.entries(u))e[n(s)]=n(i);r.push(e)}return r}export{R as u};
