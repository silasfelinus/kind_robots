import I from"./Icon.40f1ff5b.js";import{_ as S}from"./nuxt-link.c8df4e1f.js";import{d as N,W as V,r as g,E as C,b as i,c as d,N as c,g as f,f as m,X as U,e,Y as x,Z as h,$ as M,w as y,C as v,t as B,a0 as F,p as R,i as T,k as D}from"./entry.10259a9c.js";const s=u=>(R("data-v-86c23938"),u=u(),T(),u),E={class:"flex flex-col items-center p-4 rounded-2xl shadow-lg transition-all duration-300 w-full max-w-md mx-auto"},P={key:0,class:"text-center text-info"},$=s(()=>e("div",null,"Loading, please wait...",-1)),j=["autocomplete","onSubmit"],q={class:"mb-2 relative group"},H=s(()=>e("label",{for:"login",class:"block text-sm mb-1"},"Login:",-1)),W=s(()=>e("div",{class:"absolute right-2 bottom-2 text-xs text-gray-500 group-hover:float-tooltip"}," Login ",-1)),X={class:"mb-2 relative group"},Y=s(()=>e("label",{for:"password",class:"block text-sm mb-1"},"Password (optional):",-1)),Z=s(()=>e("div",{class:"absolute right-2 bottom-2 text-xs text-gray-500 group-hover:float-tooltip"}," Password (optional) ",-1)),z={class:"flex items-center justify-between"},A=s(()=>e("label",{for:"stayLoggedIn",class:"text-sm"},"Stay Logged in",-1)),G=s(()=>e("button",{type:"submit",class:"bg-info text-default py-1 px-3 rounded"},"Login",-1)),J={class:"text-center mt-2"},K={key:2,class:"text-warning mt-2 w-full text-center"},O={key:0},Q={class:"mt-2"},ee={class:"text-accent underline"},te=N({__name:"LoginForm",setup(u){const o=V(),_=g(""),n=g(""),a=g("");C(()=>o.isLoggedIn);const p=g(!1),w=async()=>{a.value="",p.value=!1;try{const l={username:_.value};n.value&&(l.password=n.value);const t=await o.login(l);t.success&&o.stayLoggedIn?o.setStayLoggedIn(!0):(a.value=t.message,t.message.includes("User not found")&&(p.value=!0))}catch(l){a.value=F(l).message}},L=()=>{_.value="",n.value="",a.value="",p.value=!1};return(l,t)=>{const k=I,b=S;return i(),d("div",E,[c(o).loading?(i(),d("div",P,[f(k,{name:"tabler:loader",class:"animate-spin text-lg mb-2"}),$])):m("",!0),c(o).isLoggedIn?m("",!0):(i(),d("form",{key:1,class:"space-y-4 w-full",autocomplete:c(o).stayLoggedIn?"on":"off",onSubmit:U(w,["prevent"])},[e("div",q,[H,x(e("input",{id:"login","onUpdate:modelValue":t[0]||(t[0]=r=>_.value=r),type:"text",autocomplete:"username",class:"w-full p-2 border rounded",required:""},null,512),[[h,_.value]]),W]),e("div",X,[Y,x(e("input",{id:"password","onUpdate:modelValue":t[1]||(t[1]=r=>n.value=r),type:"password",autocomplete:"current-password",class:"w-full p-2 border rounded"},null,512),[[h,n.value]]),Z]),e("div",z,[e("div",null,[x(e("input",{id:"stayLoggedIn","onUpdate:modelValue":t[2]||(t[2]=r=>c(o).stayLoggedIn=r),type:"checkbox",class:"mr-2"},null,512),[[M,c(o).stayLoggedIn]]),A]),G]),e("div",J,[f(b,{to:"/register",class:"text-accent underline"},{default:y(()=>[v("Register")]),_:1})])],40,j)),a.value?(i(),d("div",K,[v(B(a.value)+" ",1),p.value?(i(),d("div",O,[e("div",Q,[e("button",ee,[f(b,{to:"/register",class:"text-accent underline"},{default:y(()=>[v("Register")]),_:1})]),v(" or "),e("button",{class:"text-accent underline",onClick:L}," Try a different login ")])])):m("",!0)])):m("",!0)])}}});const ne=D(te,[["__scopeId","data-v-86c23938"]]);export{ne as default};
