import w from"./response-card.db1a98a9.js";import{d as k,aR as S,G as B,r as c,o as I,aT as C,b as d,c as i,e,t as u,Z as j,$ as R,f as _,g as V,p as N,i as T,k as A}from"./entry.0e1ae4de.js";import{a as D}from"./axios.47b9d439.js";const b=n=>(N("data-v-fe265711"),n=n(),T(),n),E=["data-theme"],M={key:0,class:"avatar-container max-w-3xl w-full p-4 bg-white rounded-lg shadow-lg"},P={class:"flex flex-col md:flex-row items-center"},G=["src"],K={class:"flex-1 text-center md:text-left p-4"},L={class:"text-3xl font-bold text-theme"},U={class:"text-xl"},Z={class:"card"},$={class:"user-intro p-2 bg-gray-200 rounded-md shadow-inner"},q={class:"text-lg"},z={class:"message-container mt-4 border-t-2 border-theme"},F={class:"prompt-area p-4 bg-gray-200 rounded-md shadow-inner"},H=["disabled"],J={key:0,class:"loader flex justify-center mt-2"},O=b(()=>e("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-accent-900"},null,-1)),Q=[O],W={key:1,class:"response-container mt-4 p-4 bg-gray-100 rounded-md shadow-md"},X=b(()=>e("h2",null,"Response:",-1)),Y={class:"response-card p-4 bg-white rounded-md shadow-lg border-2 border-theme"},ee=k({__name:"bot-prompt",setup(n){const f=S(),t=B(()=>f.currentBot),a=c(""),m=c(null),o=c([]),r=c(!1);let p=null;I(()=>{p=localStorage.getItem("user_openai_key")}),C(()=>{t.value&&t.value.prompt&&(a.value=t.value.prompt)});const h=async()=>{r.value=!0,o.value.push({role:"user",content:a.value});try{const s=await D.post("/api/botcafe/chat",{model:"gpt-3.5-turbo",messages:o,userKey:p},{headers:{"Content-Type":"application/json",Accept:"application/json"}});o.value=[...o.value,{role:"assistant",content:s.data.choices[0].message.content}],m.value=s.data.choices[0].message.content}catch(s){console.error(s)}finally{r.value=!1}},g=async s=>{try{o.value=s,a.value=s[s.length-1].content,await h()}catch(l){console.error(l)}};return(s,l)=>{var v;const x=w;return d(),i("div",{class:"container flex flex-col justify-center items-center p-4 bg-gray-100","data-theme":(v=t.value)==null?void 0:v.theme},[t.value?(d(),i("div",M,[e("div",P,[e("img",{src:t.value.avatarImage,alt:"Bot Avatar",class:"avatar-img md:w-1/4 rounded-full border-4 border-theme shadow-md"},null,8,G),e("div",K,[e("h1",L,u(t.value.name),1),e("p",U,u(t.value.subtitle),1),e("div",Z,u(t.value.description),1),e("div",$,[e("p",q,u(t.value.userIntro),1)])])]),e("div",z,[e("div",F,[j(e("textarea",{"onUpdate:modelValue":l[0]||(l[0]=y=>a.value=y),rows:"5",class:"message-input w-full p-2 rounded-md border-2 border-theme"},null,512),[[R,a.value]]),e("button",{class:"submit-button btn btn-primary mt-2",disabled:r.value,onClick:h}," Send Message ",8,H)]),r.value?(d(),i("div",J,Q)):_("",!0),m.value?(d(),i("div",W,[X,e("div",Y,[V(x,{messages:o.value,"send-message":g},null,8,["messages"])])])):_("",!0)])])):_("",!0)],8,E)}}});const ae=A(ee,[["__scopeId","data-v-fe265711"]]);export{ae as default};
