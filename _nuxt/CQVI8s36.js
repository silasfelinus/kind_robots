import{_ as L}from"./Ia3JmYqs.js";import{_ as T,c as U}from"./DL1M4P07.js";import{aZ as A,d as F,W as G,E as _,r as l,o as I,V as W,c as n,e as r,f as t,h as Z,Z as z,am as K,F as V,a5 as $,t as g,G as Y,g as b,n as j,k as q,p as J,j as O,l as Q}from"./Bh_OSRoe.js";import"./BWBek36E.js";import"./Bm4K94d7.js";import"./CwLGbeD0.js";const X=A("/images/kindtitle.webp"),y=m=>(J("data-v-e479bb4c"),m=m(),O(),m),ee={class:"container mx-auto px-4 py-8 min-h-screen flex flex-col items-center space-y-6"},te={class:"text-center space-y-2"},ae=y(()=>t("h1",{class:"text-4xl font-bold"}," Kind Robots Memory Game ",-1)),se=y(()=>t("p",{class:"text-gray-600"}," Match the images and test your memory! ",-1)),oe={class:"difficulty-controls"},le=y(()=>t("label",{for:"difficulty"},"Select Difficulty: ",-1)),ne=["value"],re={class:"game-board w-full max-w-4xl flex flex-wrap justify-center items-center"},ie={key:0,class:"loader mt-4"},ce=["onClick"],ue=y(()=>t("img",{class:"card-back absolute inset-0 w-full h-full object-cover",src:X,alt:"Memory Card"},null,-1)),de=["src","alt"],me={class:"game-controls mt-4 flex flex-col items-center space-y-2","aria-live":"polite",role:"status"},fe={key:1,class:"mt-2 space-y-2 text-center"},pe=F({__name:"MemoryGame",setup(m){var R;const f=G(),P=_(()=>f.user);_(()=>f.username);const x=_(()=>f.matchRecord),B=()=>{U({particleCount:100,spread:70,origin:{y:.6}})},p=l([]),M=[{label:"Easy",value:8},{label:"Medium",value:12},{label:"Hard",value:16}],v=l(M[0]),w=l(!1),i=l(null),k=l(!1),h=l(!0);function N(){return typeof window<"u"}const c=l(0);if(N()){const e=(R=P.value)==null?void 0:R.matchRecord;e&&(c.value=Number(e))}let s=null;async function E(){try{h.value=!0,w.value=!1;const e=Math.ceil(v.value.value/2),d=await(await fetch(`/api/galleries/random/count/${e}`)).json();if(d.images.length!==e)throw new Error("Received an unexpected number of images.");p.value=d.images.concat(d.images).map((C,a)=>({id:a,galleryName:"",imagePath:C,flipped:!1,matched:!1})).sort(()=>.5-Math.random()),h.value=!1}catch(e){h.value=!1,console.error("Error generating images:",e),i.value={type:"error",message:"Error generating images. Please try again later."}}}const o=l(0);function D(e){e.flipped||e.matched||(e.flipped=!0,s?s&&s.imagePath===e.imagePath?(e.matched=!0,s.matched=!0,o.value+=10,setTimeout(()=>{s=null},500),p.value.every(u=>u.matched)&&(w.value=!0,B(),(x.value<o.value||x.value===null)&&f.updateMatchRecord(o.value),o.value>=50&&(k.value=!0),(o.value>c.value||o.value>x.value)&&(c.value=o.value,N()&&localStorage.setItem("highScore",c.value.toString())))):(o.value-=5,setTimeout(()=>{e.flipped=!1,s&&(s.flipped=!1),s=null},500)):s=e)}const H=_(()=>{const e="notification py-2 px-4 rounded-lg mb-2";return i.value?i.value.type==="error"?`${e} bg-red-200 text-red-700`:`${e} bg-green-200 text-green-700`:e});function S(){p.value.forEach(e=>{e.flipped=!1,e.matched=!1}),o.value=0,s=null,E()}return I(E),W(v,S),(e,u)=>{const d=L,C=T;return n(),r("div",ee,[t("header",te,[ae,se,Z(d),t("div",oe,[le,z(t("select",{id:"difficulty","onUpdate:modelValue":u[0]||(u[0]=a=>v.value=a)},[(n(),r(V,null,$(M,a=>t("option",{key:a.label,value:a},g(a.label),9,ne)),64))],512),[[K,v.value]]),t("button",{class:"rounded-2xl text-white bg-primary p-2 m-1 border",onClick:S}," Start New Game "),k.value?(n(),Y(C,{key:0,id:5})):b("",!0)])]),t("div",re,[h.value?(n(),r("div",ie)):b("",!0),(n(!0),r(V,null,$(p.value,a=>(n(),r("div",{key:a.id,class:"gallery-display m-4 hover:scale-105 transform transition-transform duration-300 relative rounded-xl overflow-hidden w-screen cursor-pointer",onClick:ve=>D(a)},[t("div",{class:j({flipped:a.flipped||a.matched})},[ue,t("img",{class:"card-front absolute inset-0 w-full h-full object-cover",src:a.imagePath,alt:a.galleryName},null,8,de)],2)],8,ce))),128))]),t("div",me,[i.value?(n(),r("div",{key:0,class:j(H.value)},g(i.value.message),3)):b("",!0),t("div",null,"Score: "+g(o.value),1),t("div",null,"High Score: "+g(c.value),1),w.value?(n(),r("div",fe,[q(" Congratulations! You've won! "),t("button",{class:"btn btn-info mt-2 px-4 py-2 bg-blue-500 text-default rounded hover:bg-blue-600 focus:outline-none focus:ring focus:ring-blue-200 transition-colors",onClick:S}," Play Again? ")])):b("",!0)])])}}}),we=Q(pe,[["__scopeId","data-v-e479bb4c"]]);export{we as default};
