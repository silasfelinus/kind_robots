import{d as O,a1 as I,aB as B,a2 as C,I as u,r as a,c as n,e as d,k as D,f as o,t as S,W as L,X as V,h as b,g as w,$,F as W,a9 as j,a4 as E,aD as F}from"./DJsSOPwi.js";import{_ as G}from"./u0TDvN9b.js";import U from"./XT7WN8Xc.js";import{u as K}from"./BOUxpNtp.js";import{u as J}from"./Bsbkd6-H.js";const X={class:"bg-base-200 rounded-2xl p-8 text-lg"},q=o("h1",{class:"text-2xl mb-4"},"Art-Generator",-1),z={class:"font-bold"},H={class:"mt-4"},Q=["disabled"],Y={key:0,class:"mt-4 flex flex-col items-center"},Z={class:"loader flex justify-center mt-2"},le=O({__name:"Art-Generator",setup(ee){const k=K(),p=I(),N=J(),_=B(),f=C(),h=u(()=>_.selectedPitch),v=u(()=>{var e;return((e=_.selectedPitch)==null?void 0:e.pitch)||""}),l=a(""),g=a(""),P=u(()=>p.username),R=u(()=>p.userId),c=a(!1),m=a([]),x=a(null),y=a(!1),T=()=>{x.value=N.randomLoadMessage()};(()=>{const e=k.randomDream();e&&(l.value=e)})();const A=async()=>{var e,s;T(),c.value=!0;try{const t=await fetch("/api/art/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:`${v.value}, ${l.value}, ${g.value}`,userName:P.value,galleryName:"cafefred",pitchId:(e=h.value)==null?void 0:e.id,title:(s=h.value)==null?void 0:s.title,isMature:!1,isPublic:!0,isOrphan:!0,flavorText:g.value,userId:R.value,galleryId:21})});if(t.ok){const r=await t.json();m.value.unshift(r.newArt),y.value=!0,console.log("Art generated:",m)}else{const r=await t.text();f.setError(E.NETWORK_ERROR,r),console.error("Failed to generate art:",r)}}catch(t){const r=t instanceof Error?t.message:String(t);f.setError(E.UNKNOWN_ERROR,r),console.error("Error generating art:",r)}finally{c.value=!1}};return(e,s)=>{const t=F,r=G,M=U;return n(),d("div",X,[q,D(" Enter your Art Prompt. We will automatically begin with the pitch: "),o("div",z,S(v.value),1),o("div",H,[L(o("input",{"onUpdate:modelValue":s[0]||(s[0]=i=>l.value=i),placeholder:"Enter your art prompt",class:"rounded-2xl p-2 w-full text-lg"},null,512),[[V,l.value]])]),o("button",{disabled:c.value,class:"bg-primary rounded-2xl p-2 text-white mt-4 w-full hover:bg-primary-dark",onClick:A}," Generate Art for Pitch ",8,Q),c.value?(n(),d("div",Y,[o("p",null,S(x.value),1),o("div",Z,[b(t)])])):w("",!0),y.value?(n(),$(r,{key:1,id:11})):w("",!0),(n(!0),d(W,null,j(m.value,i=>(n(),d("div",{key:i.id,class:"mt-4"},[b(M,{art:i},null,8,["art"])]))),128))])}}});export{le as _};
