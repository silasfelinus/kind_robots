import{r as i,E as S,b as o,c as r,Y as h,Z as y,e as s,F as E,a4 as w,t as v,a_ as M,f as g}from"./entry.10259a9c.js";import{a as R}from"./axios.47b9d439.js";import{u as T,S as _}from"./statusStore.37608132.js";import{u as D,E as C}from"./errorStore.de5245c2.js";const V={class:"bg-base p-8"},F={class:"space-y-4"},I={class:"label-text capitalize"},N=["onUpdate:modelValue","type","min","step","max"],O={class:"mt-4 text-xl"},U={key:0,class:"mt-4"},A=s("div",{class:"loader"},null,-1),B=[A],z={key:1,class:"mt-4"},$=["src"],W={__name:"MakeArt",setup(j){const u=i(""),n=T(),f=D(),c=i(null),d=i(!1),b=S(()=>n.message),l=i({seed:-1,sampler_name:"DDIM",batch_size:1,n_iter:1,steps:20,cfg_scale:7,width:512,height:512}),x=async()=>{var m,a;try{d.value=!0,n.setStatus(_.INFO,"Submitting your text...");const e={text:u.value,settings:l.value},t=await R.post("https://cafefred.purrsalon.com/sdapi/v1/txt2img",e,{headers:{"Content-Type":"application/json"}});if(t.status!==200)throw new Error(`API error: ${t.statusText}`);const p=t.data;c.value=`data:image/png;base64,${p.images[0]}`,n.setStatus(_.SUCCESS,"Successfully submitted!")}catch(e){console.error(e);const t=((a=(m=e.response)==null?void 0:m.data)==null?void 0:a.message)||e.message||"Failed to submit text";f.handleError(()=>{throw e},C.NETWORK_ERROR,t),n.setStatus(_.ERROR,t)}finally{d.value=!1}};return(m,a)=>(o(),r("div",V,[h(s("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>u.value=e),class:"input input-bordered w-full mb-4",placeholder:"Enter your text here"},null,512),[[y,u.value]]),s("div",F,[(o(!0),r(E,null,w(l.value,(e,t)=>(o(),r("div",{key:t,class:"label"},[s("span",I,v(t)+":",1),h(s("input",{"onUpdate:modelValue":p=>l.value[t]=p,type:typeof e,class:"input input-bordered",min:t==="width"||t==="height"?256:void 0,step:t==="width"||t==="height"?64:void 0,max:t==="width"||t==="height"?1024:void 0},null,8,N),[[M,l.value[t]]])]))),128))]),s("button",{class:"btn btn-primary mt-4",onClick:x},"Submit"),s("p",O,v(b.value),1),d.value?(o(),r("div",U,B)):g("",!0),c.value?(o(),r("div",z,[s("img",{src:c.value,alt:"Generated Image",class:"max-w-full h-auto"},null,8,$)])):g("",!0)]))}};export{W as default};
