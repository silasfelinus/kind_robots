generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Art {
  id          Int           @id @default(autoincrement())
  galleryId   Int?          @default(0)
  path        String        @db.VarChar(764)
  prompt      String?       @db.Text
  artPromptId Int?          @default(0)
  userId      Int?          @default(0)
  pitchId     Int?          @default(0)
  createdAt   DateTime?     @default(now())
  updatedAt   DateTime?     @updatedAt @default(now())
  boos        Int?          @default(0)
  claps       Int?          @default(0)
  cfg         String?       @db.VarChar(764)
  checkpoint  String?       @db.VarChar(256)
  sampler     String?       @db.VarChar(764)
  seed        Int?          @default(0)
  steps       Int?          @default(0)
  pitch       String?       @db.VarChar(764)
  channelId   Int?          @default(0)
  isOrphan    Boolean?          @default(false)
  isPublic    Boolean?          @default(false)
  isMature    Boolean?          @default(false)
  designer    String?       @db.VarChar(764)
  ArtReaction ArtReaction[]
  Game  Game[]
}

model ArtPrompt {
  id            Int       @id @default(autoincrement())
  createdAt     DateTime  @default(now())
  updatedAt     DateTime? @updatedAt @default(now())
  userId        Int       @default(0)
  prompt        String    @db.VarChar(8000)
  galleryId     Int?      @default(0)
  pitch         String?   @db.VarChar(764)
  pitchId       Int?      @default(0)
  DB_ROW_HASH_1 BigInt
  Game  Game[]
}

model ArtReaction {
  id        Int       @id @unique @default(autoincrement())
  createdAt DateTime  @default(now())
  updatedAt DateTime? @updatedAt @default(now())
  userId    Int
  artId     Int?
  claps     Int       @default(0)
  boos      Int       @default(0)
  title     String?
  comment   String?   @db.Text
  reaction  String?
  pitchId   Int?
  Art       Art?      @relation(fields: [artId], references: [id])
  Pitch     Pitch?    @relation(fields: [pitchId], references: [id])
  User      User      @relation(fields: [userId], references: [id])

  @@index([artId], map: "ArtReaction_artId_fkey")
  @@index([pitchId], map: "ArtReaction_pitchId_fkey")
  @@index([userId], map: "ArtReaction_userId_fkey")
}

model Bot {
  id                Int       @id @default(autoincrement())
  createdAt         DateTime  @default(now())
  updatedAt         DateTime? @updatedAt @default(now())
  BotType           String    @db.VarChar(764)
  name              String    @unique(map: "Bot_id_key", length: 200) @db.VarChar(764)
  isPublic          Boolean       @default(false)
  underConstruction Boolean       @default(false)
  canDelete         Boolean       @default(false)
  subtitle          String    @db.VarChar(764)
  description       String    @db.VarChar(764)
  avatarImage       String    @db.VarChar(764)
  botIntro          String    @db.VarChar(764)
  userIntro         String    @db.VarChar(764)
  prompt            String    @db.VarChar(764)
  trainingPath      String?   @db.VarChar(764)
  theme             String?   @db.VarChar(764)
  personality       String    @db.VarChar(764)
  modules           String?   @db.VarChar(764)
  userId            Int?      @default(0)
  sampleResponse    String?   @db.VarChar(764)
  tagline           String?   @db.VarChar(764)
  Slogan            Slogan[]
}

model Cart {
  id         Int        @id @unique @default(autoincrement())
  createdAt  DateTime   @default(now())
  updatedAt  DateTime?  @updatedAt @default(now())
  customerId Int
  Customer   Customer   @relation(fields: [customerId], references: [id])
  items      CartItem[]

  @@index([customerId], map: "Cart_customerId_fkey")
}

model CartItem {
  id        Int     @id @unique @default(autoincrement())
  cartId    Int
  productId Int
  quantity  Int     @default(1)
  Cart      Cart    @relation(fields: [cartId], references: [id])
  Product   Product @relation(fields: [productId], references: [id])

  @@index([cartId], map: "CartItem_cartId_fkey")
  @@index([productId], map: "CartItem_productId_fkey")
}


model Channel {
  id          Int       @id @default(autoincrement())
  createdAt   DateTime  @default(now())
  updatedAt   DateTime? @updatedAt @default(now())
  userId      Int?      @default(16580608)
  label       String    @unique(map: "Channel_id_key", length: 200) @db.VarChar(764)
  description String?   @db.VarChar(8000)
  tagId       Int?      @default(0)
  title       String?   @db.VarChar(764)
  pitchId     Int?      @default(0)

  messages    Message[] // Add this line to establish the relationship
}

model ChatExchange {
  id              Int      @id @default(autoincrement())
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt @default(now())
  botId           Int?     @default(57088)
  botName         String   @db.VarChar(255)
  userId          Int
  username        String   @db.VarChar(255)
  userPrompt      String   @db.Text
  botResponse     String   @db.Text
  liked           Boolean?     @default(false)
  hated           Boolean?     @default(false)
  loved           Boolean?     @default(false)
  flagged         Boolean?     @default(false)
  previousEntryId Int?     @default(0)
  isPublic        Boolean @default(false)
}


model Customer {
  id        Int       @id @unique @default(autoincrement())
  createdAt DateTime  @default(now())
  updatedAt DateTime? @updatedAt @default(now())
  email     String    @unique
  name      String?
  userId    Int?      @unique
  Carts     Cart[]
  User      User?     @relation(fields: [userId], references: [id])
}

model Gallery {
  id             Int       @id @default(autoincrement())
  createdAt      DateTime  @default(now())
  updatedAt      DateTime? @updatedAt @default(now())
  name           String    @unique(map: "Gallery_id_key", length: 200) @db.VarChar(764)
  description    String?   @db.Text
  mediaId        String?   @db.VarChar(764)
  url            String?   @db.VarChar(764)
  custodian      String?   @db.VarChar(764)
  userId         Int?      @default(0)
  content        String    @db.VarChar(764)
  highlightImage String?   @db.VarChar(764)
  imagePaths     String?   @db.Text
  isMature       Boolean       @default(false)
}

model Game {
  id         Int       @id @unique @default(autoincrement())
  createdAt  DateTime  @default(now())
  updatedAt  DateTime? @updatedAt @default(now())
  descriptor String?   @db.Text
  category   String    @default("Blue Sky Tasks")
  isFinished Boolean   @default(false)
  creator    String?
  isPrivate  Boolean   @default(false)
  Users    User[]
  Art      Art[]
  ArtPrompt ArtPrompt[]
  winner    String?
  Players   Player[]
}

enum PlayerStatus {
  WAITING
  CHOOSING
  FINISHED
  PLAYING
}

model Player {
  id       Int    @id @default(autoincrement())
  name     String
  points   Int    @default(0)
  gameId   Int   
  Game     Game   @relation(fields: [gameId], references: [id])
  User      User? @relation(fields: [userId], references: [id])
  userId    Int?
  status    PlayerStatus  @default(WAITING)
}

model Log {
  id        Int      @id @default(autoincrement())
  message   String   @db.Text
  timestamp DateTime @db.DateTime(0)
  username  String?  @db.VarChar(764)
}

model Message {
  id        Int       @id @default(autoincrement())
  createdAt DateTime  @default(now())
  updatedAt DateTime? @updatedAt @default(now())
  sender    String    @db.VarChar(764)
  recipient String    @db.VarChar(764)
  content   String    @db.Text
  channelId Int
  botId     Int?      @default(0)
  userId    Int?      @default(0)

  channel   Channel   @relation(fields: [channelId], references: [id]) // Add this line to establish the relationship
}

model Milestone {
  id           Int       @id @default(autoincrement())
  label        String    @db.VarChar(764)
  message      String    @db.VarChar(764)
  icon         String    @db.VarChar(764)
  karma        Int       @default(0)
  isRepeatable Boolean       @default(true)
  createdAt    DateTime   @default(now())
  updatedAt    DateTime? @updatedAt @default(now())
  triggerCode  String    @db.VarChar(764)
  tooltip      String?   @db.VarChar(764)
  isActive     Boolean       @default(false)
  pageHint     String?   @db.VarChar(764)
  subtleHint   String?   @db.VarChar(764)
}

model MilestoneRecord {
  id          Int       @id @default(autoincrement())
  createdAt   DateTime  @default(now())
  updatedAt   DateTime? @updatedAt @default(now())
  milestoneId Int
  userId      Int
  username    String?   @db.VarChar(764)
  User        User @relation(fields: [userId], references: [id])
}

model Pitch {
  id             Int           @id @default(autoincrement())
  createdAt      DateTime      @default(now())
  updatedAt      DateTime?     @updatedAt @default(now())
  title          String        @unique @db.VarChar(764)
  pitch          String        @db.VarChar(764)
  userId         Int           @default(0)
  isPublic       Boolean       @default(false)
  claps          Int           @default(0)
  boos           Int           @default(0)
  channelId      Int?          @unique @default(0)
  designer       String        @db.VarChar(256)
  flavorText     String?       @db.VarChar(512)
  isOrphan       Boolean           @default(false)
  creatorId      Int?          @default(0)
  highlightImage String        @db.VarChar(256)
  isMature       Boolean           @default(false)
  ArtReaction    ArtReaction[]
}



model RandomList {
  id     Int    @id @default(autoincrement())
  title  String @db.VarChar(764) @unique
  items  String @db.LongText
  userId Int?   @default(0)
}

model Post {
  id             Int       @id @default(autoincrement())
  createdAt      DateTime  @default(now())
  updatedAt      DateTime? @updatedAt @default(now())
  userId         Int?      @default(0)
  username       String    @db.VarChar(764)
  content        String    @db.VarChar(764)
  title          String?   @db.VarChar(764)
  label          String    @db.VarChar(764)
  imagePath      String?   @db.VarChar(764)
  artId          Int?      @default(0)
  pitchId        Int?      @default(0)
  pitchname      String?   @db.VarChar(764)
  sloganContent  String?   @db.VarChar(764)
  sloganId       Int?      @default(0)
  botId          Int?      @default(0)
  botname        String?   @db.VarChar(764)
  channelId      Int?      @default(0)
  likes          Int       @default(0)
  dislikes       Int       @default(0)
  hates          Int       @default(0)
  loves          Int       @default(0)
  jellybeanClaps Int       @default(0)
  isFavorite     Boolean   @default(false)
}

model Product {
  id            Int        @id @default(autoincrement())
  createdAt     DateTime   @default(now())
  updatedAt     DateTime?  @updatedAt @default(now())
  title         String     @db.VarChar(764)
  category      String     @db.VarChar(764)
  flavorText    String?    @db.VarChar(764)
  description   String     @db.VarChar(8000)
  costInPennies Int        @default(0)
  userId        Int        @default(0)
  passcode      String?    @db.VarChar(764)
  imagePath     String?    @db.VarChar(764)
  CartItem      CartItem[]
}

model Resource {
  id           Int          @id @default(autoincrement())
  createdAt    DateTime     @default(now())
  updatedAt    DateTime?    @updatedAt @default(now())
  userId       Int?         @default(-65536)
  name         String       @unique(map: "Resource_id_key", length: 200) @db.VarChar(764)
  customLabel  String?      @db.VarChar(764)
  MediaPath    String?      @db.VarChar(764)
  customUrl    String?      @db.VarChar(764)
  civitaiUrl   String?      @db.VarChar(764)
  huggingUrl   String?      @db.VarChar(764)
  localPath    String?      @db.VarChar(764)
  description  String?      @db.Text
  resourceType ResourceType
  isMature     Boolean          @default(false)
  galleryCount Int?         @default(0)
}

model Reward {
  id         Int       @id @default(autoincrement())
  createdAt  DateTime  @default(now())
  updatedAt  DateTime? @updatedAt @default(now())
  icon       String    @db.VarChar(256)
  text       String    @db.VarChar(764)
  power      String    @db.VarChar(764)
  collection String    @db.VarChar(764)
  rarity     Int       @default(0)
  label      String?   @db.VarChar(764)
  Todo       Todo[]
}

model Slogan {
  id             Int      @id @default(autoincrement())
  contentType    String   @default("slogan")
  purpose        String   @default("Anti-Malaria Fundraiser")
  url            String?  @default("https://www.againstmalaria.org/amibot")
  characterLimit Int      @default(300)
  content        String   @db.VarChar(2000)
  likes          Int      @default(0)
  dislikes       Int      @default(0)
  hates          Int      @default(0)
  loves          Int      @default(0)
  isLiked        Boolean  @default(false)
  isLoved        Boolean  @default(false)
  wasKept        Boolean?
  wasDiscarded   Boolean?
  username       String   @default("Kind Guest")
  userId         Int      @default(0)
  model          String   @default("3.5")
  kindRobot      String   @default("amibot")
  botId          Int?
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt @default(now())
  Bot            Bot?     @relation(fields: [botId], references: [id])
  User           User     @relation(fields: [userId], references: [id])

  @@index([botId], map: "Slogan_botId_fkey")
  @@index([userId], map: "Slogan_userId_fkey")
}

model Tag {
  id         Int       @id @default(autoincrement())
  createdAt  DateTime  @default(now()) 
  updatedAt  DateTime? @updatedAt @default(now())
  label      String    @db.VarChar(256)
  title      String    @db.VarChar(256)
  userId     Int       @default(0)
  isPublic   Boolean?  @default(false)
  channelId  Int?      @unique @default(0)
  flavorText String?   @db.VarChar(764)
  pitch      String?   @db.VarChar(764)
  isMature   Boolean   @default(false)
  sloganId   Int?      @default(0)
  postId     Int?      @default(0)
}


model Todo {
  id        Int       @id @default(autoincrement())
  task      String
  category  String
  completed Boolean   @default(false)
  createdAt DateTime  @default(now())
  userId    Int
  rewardId  Int?
  updatedAt DateTime? @updatedAt @default(now())
  Reward    Reward?   @relation(fields: [rewardId], references: [id])
  User      User      @relation(fields: [userId], references: [id])

  @@index([rewardId], map: "Todo_rewardId_fkey")
  @@index([userId], map: "Todo_userId_fkey")
}

model User {
  id                  Int           @id @default(autoincrement())
  createdAt           DateTime      @default(now())
  updatedAt           DateTime?     @updatedAt @default(now())
  Role                Role
  username            String        @unique @db.VarChar(255)
  email               String?       @db.VarChar(255) @unique
  questPoints         Int           @default(0)
  emailVerified       DateTime?     @db.DateTime(0)
  name                String?       @db.VarChar(255)
  address1            String?       @db.Text
  address2            String?       @db.Text
  avatarImage         String?       @db.Text
  bio                 String?       @db.Text
  birthday            DateTime?     @db.DateTime(0)
  city                String?       @db.Text
  country             String?       @db.Text
  discordUrl          String?       @db.Text
  facebookUrl         String?       @db.Text
  instagramUrl        String?       @db.Text
  kindrobotsUrl       String?       @db.Text
  languages           String?       @db.Text
  phone               String?       @db.VarChar(255)
  state               String?       @db.VarChar(255)
  timezone            String?       @db.VarChar(255)
  twitterUrl          String?       @db.Text
  apiKey              String?       @db.Text
  password            String?       @db.Text
  spotifyAccessToken  String?       @db.Text
  spotifyID           String?       @db.Text
  spotifyRefreshToken String?       @db.Text
  karma               Int           @default(0)
  mana                Int           @default(0)
  clickRecord         Int?          @default(0)
  matchRecord         Int?          @default(0)
  ArtReaction         ArtReaction[]
  Customer            Customer?
  Game                Game[]
  Slogan              Slogan[]
  Todo                Todo[]
  milestones  MilestoneRecord[]
  showMature          Boolean @default(false)
  Players             Player[]
}

model ArtReactionToTag {
  A Int
  B Int

  @@id([A, B])
  @@index([B], map: "_ArtReactionToTag_B_index")
  @@map("_ArtReactionToTag")
}

model ArtToProduct {
  A Int
  B Int

  @@id([A, B])
  @@index([B], map: "_ArtToProduct_B_index")
  @@map("_ArtToProduct")
}

model ArtToTag {
  A Int
  B Int

  @@id([A, B])
  @@index([B], map: "_ArtToTag_B_index")
  @@map("_ArtToTag")
}

model MilestoneToUser {
  A Int
  B Int

  @@id([A, B])
  @@index([B], map: "_MilestoneToUser_B_index")
  @@map("_MilestoneToUser")
}

model RewardToUser {
  A Int
  B Int

  @@id([A, B])
  @@index([B], map: "_RewardToUser_B_index")
  @@map("_RewardToUser")
}

enum Role {
  SYSTEM
  USER
  ASSISTANT
  ADMIN
  GUEST
  BOT
  DESIGNER
  CHILD
}

enum ResourceType {
  CHECKPOINT
  EMBEDDING
  LORA
  LYCORIS
  HYPERNETWORK
  CONTROLNET
  URL
  API
}
