import{aL as C,a0 as l,d as I,W as N,r as v,o as B,E as T,b as c,c as p,e as a,N as r,Y as j,Z as D,f as P,F as V,a4 as $,C as F,t as b,p as L,i as M,k as O}from"./entry.45f7d34b.js";const H=C("promptStore",{state:()=>({artPrompts:[],artByPromptId:[],activePrompt:null}),actions:{async fetchArtPrompts(){try{console.log("About to fetch data...");const t=await fetch("/api/art/prompts/all");if(console.log("Fetched data:",t),t.ok){const e=await t.json();this.artPrompts=e.artPrompts}}catch(t){const e=l(t);console.error("Error in fetchArtPrompts:",e.message)}},async editArtPrompt(t,e){try{const d=await(await fetch("/api/art/prompts",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,prompt:e})})).json();if(d.success){const m=this.artPrompts.findIndex(u=>u.id===t);m!==-1&&(this.artPrompts[m].prompt=e)}else throw new Error(d.message)}catch(o){l({success:!1,message:o.message})}},async fetchArtByPromptId(t){try{const e=await fetch(`/api/art/prompts/${t}`);e.ok&&(this.artByPromptId=await e.json())}catch(e){const o=l(e);console.error("Error in fetchArtByPromptId:",o.message)}},selectPrompt(t){this.activePrompt=t},clearPrompt(){this.activePrompt=null},async createArtPrompt(t){try{const e=await fetch("/api/art/prompts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:t})});if(e.ok){const o=await e.json();this.artPrompts.push(o)}}catch(e){const o=l(e);console.error("Error in createArtPrompt:",o.message)}},async deleteArtPrompt(t){try{(await fetch(`/api/art/prompts/${t}`,{method:"DELETE"})).ok&&(this.artPrompts=this.artPrompts.filter(o=>o.id!==t))}catch(e){const o=l(e);console.error("Error in deleteArtPrompt:",o.message)}}}}),J=t=>(L("data-v-2c447610"),t=t(),M(),t),U={class:"art-prompts rounded-2xl border bg-base-200 flex flex-col m-4 p-4 text-lg"},R=J(()=>a("h1",null,"Art Prompts",-1)),W={key:0,class:"input-section"},Y=["disabled"],Z=["onClick"],q={key:0},z=["onClick"],G=["onClick"],K={key:1},Q=I({__name:"ArtPrompts",setup(t){const e=H(),{fetchArtPrompts:o,selectPrompt:d,artPrompts:m,activePrompt:u,createArtPrompt:A,deleteArtPrompt:k}=e,f=N(),_=f.role,n=v(""),x=v(null),E=i=>{x.value=i,n.value=i.prompt};B(()=>{o()});const y=T(()=>n.value.trim().length>0),w=()=>{y.value&&(A(n.value.trim()),n.value="")},S=i=>{k(i)};return(i,h)=>(c(),p("div",U,[R,a("button",{onClick:h[0]||(h[0]=(...s)=>r(o)&&r(o)(...s))},"Fetch Art Prompts"),r(_)==="admin"?(c(),p("div",W,[j(a("input",{"onUpdate:modelValue":h[1]||(h[1]=s=>n.value=s),placeholder:"New Prompt",class:"input-styling"},null,512),[[D,n.value]]),a("button",{disabled:!r(y),class:"add-button",onClick:w},"Add Prompt",8,Y)])):P("",!0),a("ul",null,[(c(!0),p(V,null,$(r(m),s=>(c(),p("li",{key:s.id},[F(b(s.prompt)+" ",1),a("button",{onClick:g=>r(d)(s)},"Select",8,Z),r(_)==="ADMIN"&&r(f).isLoggedIn?(c(),p("span",q,[a("button",{class:"rounded-2xl border bg-base-200 flex p-2 m-2",onClick:g=>E(s)},"Edit",8,z),a("button",{class:"rounded-2xl border bg-base-200 flex p-2 m-2",onClick:g=>S(s.id)},"Delete",8,G)])):P("",!0)]))),128))]),r(u)?(c(),p("div",K,[a("h2",null,"Selected Prompt: "+b(r(u).prompt),1)])):P("",!0)]))}});const tt=O(Q,[["__scopeId","data-v-2c447610"]]);export{tt as default};
