import{d as x,aV as S,X as R,Y as b,r as k,G as u,c as s,e as o,f as c,F as M,a6 as N,n as C,k as T,t as d,g as f,O as A,a2 as n}from"./CpGAEQl5.js";import{u as G}from"./C-L6zfrJ.js";const I={class:"flex flex-col items-center space-y-8"},L={class:"flex flex-wrap"},O=["onClick"],D={key:0},V={key:0,class:"flex items-center space-x-4"},X=x({__name:"PitchTagSelector",setup(B){const r=S(),l=R(),i=b(),E=G(),p=k(!0),t=u(()=>r.selectedPitch),w=e=>{r.selectPitch(e)},m=u(()=>r.pitches),g=u(()=>m.value.filter(e=>!!(l.userId===e.userId||p.value&&e.isPublic||E.showMature&&e.isMature))),y=async()=>{try{await i.handleError(async()=>{if(t.value){const e=t.value.isMature??!1;await r.updatePitch(t.value.id,{isMature:!e})}},n.GENERAL_ERROR,"Error toggling pitch Mature")}catch(e){console.error("Error in togglePitchMature:",e)}},P=async()=>{try{await i.handleError(async()=>{const e=prompt("Enter the title for the new pitch:");e&&await r.addPitch(e,l.userId)},n.GENERAL_ERROR,"Error adding new pitch")}catch(e){console.error("Error in addNewPitch:",e)}},_=async()=>{try{await i.handleError(async()=>{if(t.value){const e=prompt("Enter new title for the pitch:");e&&await r.editPitchTitle(t.value.id,e)}},n.GENERAL_ERROR,"Error editing pitch title")}catch(e){console.error("Error in editSelectedPitch:",e)}},v=async()=>{try{await i.handleError(async()=>{t.value&&t.value.id!==null&&confirm("Are you sure you want to delete your pitch?")&&await r.deletePitch(t.value.id)},n.GENERAL_ERROR,"Error deleting pitch")}catch(e){console.error("Error in deleteSelectedPitch:",e)}};return(e,F)=>(s(),o("div",I,[c("div",L,[(s(!0),o(M,null,N(g.value,a=>{var h;return s(),o("button",{key:a.id,class:C([((h=t.value)==null?void 0:h.id)===a.id?"bg-primary text-white":"bg-base-200","rounded-2xl border p-2 m-2"]),onClick:z=>w(a.id)},[T(d(a.title)+" ",1),a.username?(s(),o("span",D,"("+d(a.username)+")",1)):f("",!0)],10,O)}),128))]),t.value&&A(l).userId===t.value.userId?(s(),o("div",V,[c("button",{class:"bg-warning text-white rounded-2xl p-2",onClick:_}," Edit "),c("button",{class:"bg-info text-white rounded-2xl p-2",onClick:v}," Delete "),c("button",{class:"bg-accent text-white rounded-2xl p-2",onClick:y},d(t.value.isMature?"Hide":"Show")+" Mature ",1)])):f("",!0),c("button",{class:"bg-success text-white rounded-2xl p-2",onClick:P}," Add New Pitch ")]))}});export{X as default};
