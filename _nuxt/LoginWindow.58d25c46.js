import B from"./Icon.67035081.js";import{_ as W}from"./nuxt-link.a026ed0e.js";import{d as D,W as G,r as u,E as I,o as H,b as o,c as a,e,N as _,f as m,g as b,t as h,G as S,w as y,C as w,X as $,Y as k,Z as V,$ as q,a0 as z,p as A,i as E,k as J}from"./entry.31782de1.js";const l=p=>(A("data-v-2951e426"),p=p(),E(),p),K={class:"flex items-center h-36 w-36 z-50"},O=["src"],P={class:"ml-2 text-base-200"},T={key:0,class:"flex flex-col items-center bg-base-200 p-4 rounded-2xl shadow-lg transition-all duration-300"},j={key:0,class:"text-center text-info"},R=l(()=>e("div",null,"Loading, please wait...",-1)),X={key:1,class:"text-center"},Y={class:"mb-4"},Z={class:"text-lg font-semibold"},F=["autocomplete","onSubmit"],Q={class:"mb-2 relative group"},ee=l(()=>e("label",{for:"login",class:"block text-sm mb-1"},"Login:",-1)),te=l(()=>e("div",{class:"absolute right-2 bottom-2 text-xs text-gray-500 group-hover:float-tooltip"}," Login ",-1)),se={class:"mb-2 relative group"},oe=l(()=>e("label",{for:"password",class:"block text-sm mb-1"},"Password:",-1)),ae=l(()=>e("div",{class:"absolute right-2 bottom-2 text-xs text-gray-500 group-hover:float-tooltip"}," Password ",-1)),le={class:"flex items-center justify-between"},ne=l(()=>e("label",{for:"stayLoggedIn",class:"text-sm"},"Stay Logged in",-1)),re=l(()=>e("button",{type:"submit",class:"bg-info text-default py-1 px-3 rounded"},"Login",-1)),ie={class:"text-center mt-2"},ce={key:3,class:"text-warning mt-2"},de=D({__name:"LoginWindow",setup(p){const t=G(),g=u(""),v=u(""),x=u(!1),r=u(""),i=I(()=>t.isLoggedIn),c=u(!0),N=I(()=>i.value?`Hello, ${t.username} ðŸŽ‰`:"Welcome, Kind Guest"),C=()=>{x.value=!x.value},M=async()=>{r.value="";try{const s=await t.login({username:g.value,password:v.value});s.success?c.value&&localStorage.setItem("user",JSON.stringify({username:g.value})):r.value=s.message}catch(s){r.value=z(s).message}},U=()=>{t.logout(),c.value||localStorage.removeItem("user")};return H(()=>{const s=JSON.parse(localStorage.getItem("user")||"null");s&&s.username!=="Kind Guest"&&t.setUser(s)}),(s,n)=>{const L=B,f=W;return o(),a("div",K,[e("div",{class:"flex items-center cursor-pointer",onClick:C},[_(t).avatarImage?(o(),a("img",{key:0,src:_(t).avatarImage,class:"w-8 h-8 rounded-full mr-2",alt:"Avatar"},null,8,O)):m("",!0),b(L,{name:"tabler:home",class:"text-base-200 text-2xl"}),e("span",P,h(N.value),1),i.value&&_(t).role==="admin"?(o(),S(f,{key:1,to:"/admin",class:"ml-2 text-accent underline"},{default:y(()=>[w("Admin")]),_:1})):m("",!0),i.value?(o(),S(f,{key:2,to:"/dashboard",class:"ml-2 text-accent underline"},{default:y(()=>[w("Dashboard")]),_:1})):m("",!0)]),x.value&&!i.value?(o(),a("div",T,[_(t).loading?(o(),a("div",j,[b(L,{name:"tabler:loader",class:"animate-spin text-lg mb-2"}),R])):i.value?(o(),a("div",X,[e("div",Y,[e("span",Z,"Hello, "+h(_(t).username)+" ðŸŽ‰",1),e("button",{class:"bg-warning text-default py-1 px-3 rounded",onClick:U}," Logout ")])])):(o(),a("form",{key:2,class:"space-y-4 z-50",autocomplete:c.value?"on":"off",onSubmit:$(M,["prevent"])},[e("div",Q,[ee,k(e("input",{id:"login","onUpdate:modelValue":n[0]||(n[0]=d=>g.value=d),type:"text",autocomplete:"username",class:"w-full p-2 border rounded",required:""},null,512),[[V,g.value]]),te]),e("div",se,[oe,k(e("input",{id:"password","onUpdate:modelValue":n[1]||(n[1]=d=>v.value=d),type:"password",autocomplete:"current-password",class:"w-full p-2 border rounded",required:""},null,512),[[V,v.value]]),ae]),e("div",le,[e("div",null,[k(e("input",{id:"stayLoggedIn","onUpdate:modelValue":n[2]||(n[2]=d=>c.value=d),type:"checkbox",class:"mr-2"},null,512),[[q,c.value]]),ne]),re]),e("div",ie,[b(f,{to:"/register",class:"text-accent underline"},{default:y(()=>[w("Register")]),_:1})])],40,F)),r.value?(o(),a("div",ce,h(r.value),1)):m("",!0)])):m("",!0)])}}});const pe=J(de,[["__scopeId","data-v-2951e426"]]);export{pe as default};
