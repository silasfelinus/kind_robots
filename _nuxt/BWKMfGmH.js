import S from"./Csr1kED4.js";import{_ as N}from"./BRTJhAwa.js";import{d as R,Z as U,$ as V,r as f,G as C,c as i,e as d,E as l,h as x,g,Y as T,f as e,W as v,X as b,a0 as B,w as y,k as m,t as M,a1 as w,p as O,j,l as D}from"./DscwyYbq.js";const o=c=>(O("data-v-d687fb45"),c=c(),j(),c),F={class:"flex flex-col items-center p-4 rounded-2xl shadow-lg transition-all duration-300 w-full max-w-md mx-auto"},P={key:0,class:"text-center text-info"},W=o(()=>e("div",null,"Loading, please wait...",-1)),$=["autocomplete"],q={class:"mb-2 relative group"},A=o(()=>e("label",{for:"login",class:"block text-sm mb-1"},"Login:",-1)),G=o(()=>e("div",{class:"absolute right-2 bottom-2 text-xs text-gray-500 group-hover:float-tooltip"}," Login ",-1)),H={class:"mb-2 relative group"},K=o(()=>e("label",{for:"password",class:"block text-sm mb-1"},"Password (optional):",-1)),X=o(()=>e("div",{class:"absolute right-2 bottom-2 text-xs text-gray-500 group-hover:float-tooltip"}," Password (optional) ",-1)),Y={class:"flex items-center justify-between"},Z=o(()=>e("label",{for:"stayLoggedIn",class:"text-sm"},"Stay Logged in",-1)),z=o(()=>e("button",{type:"submit",class:"bg-info text-default py-1 px-3 rounded"}," Login ",-1)),J={class:"text-center mt-2"},Q={key:2,class:"text-warning mt-2 w-full text-center"},ee={key:0},te={class:"mt-2"},oe={class:"text-accent underline"},se=R({__name:"LoginForm",setup(c){const t=U(),s=V(),u=f(""),_=f(""),L=C(()=>t.isLoggedIn),p=f(!1),k=async()=>{s.clearError(),p.value=!1;try{const a=await t.login(u.value,_.value||"");a.success&&t.stayLoggedIn?t.setStayLoggedIn(!0):(s.setError(w.AUTH_ERROR,a.message),a.message.includes("User not found")&&(p.value=!0))}catch(a){s.setError(w.UNKNOWN_ERROR,a)}},I=()=>{u.value="",_.value="",s.clearError(),p.value=!1};return(a,n)=>{const E=S,h=N;return i(),d("div",F,[l(t).loading?(i(),d("div",P,[x(E,{name:"tabler:loader",class:"animate-spin text-lg mb-2"}),W])):g("",!0),L.value?g("",!0):(i(),d("form",{key:1,class:"space-y-4 w-full",autocomplete:l(t).stayLoggedIn?"on":"off",onSubmit:T(k,["prevent"])},[e("div",q,[A,v(e("input",{id:"login","onUpdate:modelValue":n[0]||(n[0]=r=>u.value=r),type:"text",autocomplete:"username",class:"w-full p-2 border rounded",required:""},null,512),[[b,u.value]]),G]),e("div",H,[K,v(e("input",{id:"password","onUpdate:modelValue":n[1]||(n[1]=r=>_.value=r),type:"password",autocomplete:"current-password",class:"w-full p-2 border rounded"},null,512),[[b,_.value]]),X]),e("div",Y,[e("div",null,[v(e("input",{id:"stayLoggedIn","onUpdate:modelValue":n[2]||(n[2]=r=>l(t).stayLoggedIn=r),type:"checkbox",class:"mr-2"},null,512),[[B,l(t).stayLoggedIn]]),Z]),z]),e("div",J,[x(h,{to:"/register",class:"text-accent underline"},{default:y(()=>[m(" Register ")]),_:1})])],40,$)),l(s).message?(i(),d("div",Q,[m(M(l(s).message)+" ",1),p.value?(i(),d("div",ee,[e("div",te,[e("button",oe,[x(h,{to:"/register",class:"text-accent underline"},{default:y(()=>[m(" Register ")]),_:1})]),m(" or "),e("button",{class:"text-accent underline",onClick:I}," Try a different login ")])])):g("",!0)])):g("",!0)])}}}),re=D(se,[["__scopeId","data-v-d687fb45"]]);export{re as default};
