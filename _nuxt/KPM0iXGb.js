import y from"./CzRsOYlT.js";import{d as S,aY as k,G as B,r as c,o as I,b0 as j,c as d,e as i,f as e,t as u,$ as C,a0 as N,g as m,h as V,p as E,j as R,l as T}from"./7SNmuExf.js";const g=r=>(E("data-v-60e6094a"),r=r(),R(),r),A=["data-theme"],D={key:0,class:"avatar-container max-w-3xl w-full p-4 bg-white rounded-lg shadow-lg"},M={class:"flex flex-col md:flex-row items-center"},O=["src"],P={class:"flex-1 text-center md:text-left p-4"},F={class:"text-3xl font-bold text-theme"},G={class:"text-xl"},J={class:"card"},K={class:"user-intro p-2 bg-gray-200 rounded-md shadow-inner"},L={class:"text-lg"},U={class:"message-container mt-4 border-t-2 border-theme"},Y={class:"prompt-area p-4 bg-gray-200 rounded-md shadow-inner"},$=["disabled"],q={key:0,class:"loader flex justify-center mt-2"},z=g(()=>e("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-accent-900"},null,-1)),H=[z],Q={key:1,class:"response-container mt-4 p-4 bg-gray-100 rounded-md shadow-md"},W=g(()=>e("h2",null,"Response:",-1)),X={class:"response-card p-4 bg-white rounded-md shadow-lg border-2 border-theme"},Z=S({__name:"bot-prompt",setup(r){const b=k(),t=B(()=>b.currentBot),n=c(""),p=c(null),a=c([]),l=c(!1);let _=null;I(()=>{_=localStorage.getItem("user_openai_key")}),j(()=>{t.value&&t.value.prompt&&(n.value=t.value.prompt)});const h=async()=>{l.value=!0,a.value.push({role:"user",content:n.value});try{const s=await fetch("/api/botcafe/chat",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({model:"gpt-3.5-turbo",messages:a.value,userKey:_})});if(!s.ok)throw new Error("Failed to send message");const o=await s.json();a.value=[...a.value,{role:"assistant",content:o.choices[0].message.content}],p.value=o.choices[0].message.content}catch(s){console.error(s)}finally{l.value=!1}},f=async s=>{try{a.value=s,n.value=s[s.length-1].content,await h()}catch(o){console.error(o)}};return(s,o)=>{var v;const w=y;return d(),i("div",{class:"container flex flex-col justify-center items-center p-4 bg-gray-100","data-theme":(v=t.value)==null?void 0:v.theme},[t.value?(d(),i("div",D,[e("div",M,[e("img",{src:t.value.avatarImage,alt:"Bot Avatar",class:"avatar-img md:w-1/4 rounded-full border-4 border-theme shadow-md"},null,8,O),e("div",P,[e("h1",F,u(t.value.name),1),e("p",G,u(t.value.subtitle),1),e("div",J,u(t.value.description),1),e("div",K,[e("p",L,u(t.value.userIntro),1)])])]),e("div",U,[e("div",Y,[C(e("textarea",{"onUpdate:modelValue":o[0]||(o[0]=x=>n.value=x),rows:"5",class:"message-input w-full p-2 rounded-md border-2 border-theme"},null,512),[[N,n.value]]),e("button",{class:"submit-button btn btn-primary mt-2",disabled:l.value,onClick:h}," Send Message ",8,$)]),l.value?(d(),i("div",q,H)):m("",!0),p.value?(d(),i("div",Q,[W,e("div",X,[V(w,{messages:a.value,"send-message":f},null,8,["messages"])])])):m("",!0)])])):m("",!0)],8,A)}}}),se=T(Z,[["__scopeId","data-v-60e6094a"]]);export{se as default};
