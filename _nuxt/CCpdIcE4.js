import{aw as T,a1 as u,a3 as i,d as w,a0 as k,r as x,o as N,I as C,c as d,e as m,f as p,N as n,W as F,X as D,g,F as V,a7 as $,k as B,t as b,p as j,j as L,l as W}from"./BwHe1LQq.js";const K=T("promptStore",{state:()=>({artPrompts:[],artByPromptId:[],activePrompt:null}),actions:{async fetchArtPrompts(){var t,e;const r=u();try{console.log("About to fetch data...");const o=await fetch("/api/art/prompts/all");if(console.log("Fetched data:",o),o.ok){const s=await o.json();this.artPrompts=s.artPrompts}else{const s=await o.text();r.setError(i.VALIDATION_ERROR,`Failed to fetch art prompts: ${s}`),console.error("Failed to fetch art prompts:",(t=r.getErrors().slice(-1)[0])==null?void 0:t.message)}}catch{r.setError(i.NETWORK_ERROR,"Error in fetchArtPrompts"),console.error("Error in fetchArtPrompts:",(e=r.getErrors().slice(-1)[0])==null?void 0:e.message)}},async editArtPrompt(r,t){var o;const e=u();try{const a=await(await fetch("/api/art/prompts",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r,prompt:t})})).json();if(a.success){const P=this.artPrompts.findIndex(f=>f.id===r);P!==-1&&(this.artPrompts[P].prompt=t)}else throw new Error(a.message)}catch{e.setError(i.NETWORK_ERROR,"Error in editArtPrompt"),console.error("Error in editArtPrompt:",(o=e.getErrors().slice(-1)[0])==null?void 0:o.message)}},async fetchArtByPromptId(r){var e,o;const t=u();try{const s=await fetch(`/api/art/prompts/${r}`);if(s.ok)this.artByPromptId=await s.json();else{const a=await s.text();t.setError(i.VALIDATION_ERROR,`Failed to fetch art by prompt ID: ${a}`),console.error("Failed to fetch art by prompt ID:",(e=t.getErrors().slice(-1)[0])==null?void 0:e.message)}}catch{t.setError(i.NETWORK_ERROR,"Error in fetchArtByPromptId"),console.error("Error in fetchArtByPromptId:",(o=t.getErrors().slice(-1)[0])==null?void 0:o.message)}},selectPrompt(r){this.activePrompt=r},clearPrompt(){this.activePrompt=null},async createArtPrompt(r){var e,o;const t=u();try{const s=await fetch("/api/art/prompts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:r})});if(s.ok){const a=await s.json();this.artPrompts.push(a)}else{const a=await s.text();t.setError(i.VALIDATION_ERROR,`Failed to create art prompt: ${a}`),console.error("Failed to create art prompt:",(e=t.getErrors().slice(-1)[0])==null?void 0:e.message)}}catch{t.setError(i.NETWORK_ERROR,"Error in createArtPrompt"),console.error("Error in createArtPrompt:",(o=t.getErrors().slice(-1)[0])==null?void 0:o.message)}},async deleteArtPrompt(r){var e,o;const t=u();try{const s=await fetch(`/api/art/prompts/${r}`,{method:"DELETE"});if(s.ok)this.artPrompts=this.artPrompts.filter(a=>a.id!==r);else{const a=await s.text();t.setError(i.VALIDATION_ERROR,`Failed to delete art prompt: ${a}`),console.error("Failed to delete art prompt:",(e=t.getErrors().slice(-1)[0])==null?void 0:e.message)}}catch{t.setError(i.NETWORK_ERROR,"Error in deleteArtPrompt"),console.error("Error in deleteArtPrompt:",(o=t.getErrors().slice(-1)[0])==null?void 0:o.message)}}}}),M=r=>(j("data-v-87ac4788"),r=r(),L(),r),J={class:"art-prompts rounded-2xl border bg-base-200 flex flex-col m-4 p-4 text-lg"},U=M(()=>p("h1",null,"Art Prompts",-1)),H={key:0,class:"input-section"},X=["disabled"],q=["onClick"],z={key:0},G=["onClick"],Q=["onClick"],Y={key:1},Z=w({__name:"ArtPrompts",setup(r){const t=K(),{fetchArtPrompts:e,selectPrompt:o,artPrompts:s,activePrompt:a,createArtPrompt:P,deleteArtPrompt:f}=t,_=k(),A=_.role,l=x(""),v=x(null),I=h=>{v.value=h,l.value=h.prompt};N(()=>{e()});const R=C(()=>l.value.trim().length>0),O=()=>{R.value&&(P(l.value.trim()),l.value="")},S=h=>{f(h)};return(h,E)=>(d(),m("div",J,[U,p("button",{onClick:E[0]||(E[0]=(...c)=>n(e)&&n(e)(...c))},"Fetch Art Prompts"),n(A)==="admin"?(d(),m("div",H,[F(p("input",{"onUpdate:modelValue":E[1]||(E[1]=c=>l.value=c),placeholder:"New Prompt",class:"input-styling"},null,512),[[D,l.value]]),p("button",{disabled:!n(R),class:"add-button",onClick:O}," Add Prompt ",8,X)])):g("",!0),p("ul",null,[(d(!0),m(V,null,$(n(s),c=>(d(),m("li",{key:c.id},[B(b(c.prompt)+" ",1),p("button",{onClick:y=>n(o)(c)},"Select",8,q),n(A)==="ADMIN"&&n(_).isLoggedIn?(d(),m("span",z,[p("button",{class:"rounded-2xl border bg-base-200 flex p-2 m-2",onClick:y=>I(c)}," Edit ",8,G),p("button",{class:"rounded-2xl border bg-base-200 flex p-2 m-2",onClick:y=>S(c.id)}," Delete ",8,Q)])):g("",!0)]))),128))]),n(a)?(d(),m("div",Y,[p("h2",null,"Selected Prompt: "+b(n(a).prompt),1)])):g("",!0)]))}}),rt=W(Z,[["__scopeId","data-v-87ac4788"]]);export{rt as default};
