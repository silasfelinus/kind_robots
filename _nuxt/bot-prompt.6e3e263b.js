import w from"./response-card.8bcfadb0.js";import{d as k,aV as S,E as B,r as c,o as I,ai as C,b as d,c as i,e,t as u,Y as V,Z as j,f as _,g as E,p as N,i as R,k as A}from"./entry.48ebb39a.js";import{a as D}from"./axios.47b9d439.js";const b=n=>(N("data-v-06e86832"),n=n(),R(),n),M=["data-theme"],P={key:0,class:"avatar-container max-w-3xl w-full p-4 bg-white rounded-lg shadow-lg"},T={class:"flex flex-col md:flex-row items-center"},K=["src"],L={class:"flex-1 text-center md:text-left p-4"},U={class:"text-3xl font-bold text-theme"},Y={class:"text-xl"},Z={class:"card"},q={class:"user-intro p-2 bg-gray-200 rounded-md shadow-inner"},z={class:"text-lg"},F={class:"message-container mt-4 border-t-2 border-theme"},G={class:"prompt-area p-4 bg-gray-200 rounded-md shadow-inner"},H=["disabled"],J={key:0,class:"loader flex justify-center mt-2"},O=b(()=>e("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-accent-900"},null,-1)),Q=[O],W={key:1,class:"response-container mt-4 p-4 bg-gray-100 rounded-md shadow-md"},X=b(()=>e("h2",null,"Response:",-1)),$={class:"response-card p-4 bg-white rounded-md shadow-lg border-2 border-theme"},ee=k({__name:"bot-prompt",setup(n){const g=S(),t=B(()=>g.currentBot),a=c(""),m=c(null),o=c([]),r=c(!1);let p=null;I(()=>{p=localStorage.getItem("user_openai_key")}),C(()=>{t.value&&t.value.prompt&&(a.value=t.value.prompt)});const h=async()=>{r.value=!0,o.value.push({role:"user",content:a.value});try{const s=await D.post("/api/botcafe/chat",{model:"gpt-3.5-turbo",messages:o,userKey:p},{headers:{"Content-Type":"application/json",Accept:"application/json"}});o.value=[...o.value,{role:"assistant",content:s.data.choices[0].message.content}],m.value=s.data.choices[0].message.content}catch(s){console.error(s)}finally{r.value=!1}},f=async s=>{try{o.value=s,a.value=s[s.length-1].content,await h()}catch(l){console.error(l)}};return(s,l)=>{var v;const x=w;return d(),i("div",{class:"container flex flex-col justify-center items-center p-4 bg-gray-100","data-theme":(v=t.value)==null?void 0:v.theme},[t.value?(d(),i("div",P,[e("div",T,[e("img",{src:t.value.avatarImage,alt:"Bot Avatar",class:"avatar-img md:w-1/4 rounded-full border-4 border-theme shadow-md"},null,8,K),e("div",L,[e("h1",U,u(t.value.name),1),e("p",Y,u(t.value.subtitle),1),e("div",Z,u(t.value.description),1),e("div",q,[e("p",z,u(t.value.userIntro),1)])])]),e("div",F,[e("div",G,[V(e("textarea",{"onUpdate:modelValue":l[0]||(l[0]=y=>a.value=y),rows:"5",class:"message-input w-full p-2 rounded-md border-2 border-theme"},null,512),[[j,a.value]]),e("button",{class:"submit-button btn btn-primary mt-2",disabled:r.value,onClick:h}," Send Message ",8,H)]),r.value?(d(),i("div",J,Q)):_("",!0),m.value?(d(),i("div",W,[X,e("div",$,[E(x,{messages:o.value,"send-message":f},null,8,["messages"])])])):_("",!0)])])):_("",!0)],8,M)}}});const ae=A(ee,[["__scopeId","data-v-06e86832"]]);export{ae as default};
