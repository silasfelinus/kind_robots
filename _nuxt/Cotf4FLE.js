import{s as m}from"./BpgrrnKf.js";import{d,ar as g,u as _,aT as x,c as y,e as T,n as k,au as w}from"./BwHe1LQq.js";const B=d({__name:"LoadingBar",props:{throttle:{type:Number,default:200},duration:{type:Number,default:2e3},height:{type:Number,default:3}},setup(u){const t=u,e=g({percent:0,show:!0,canSucceed:!0,left:"0px"});let n=null,r=null,s=0;const o=()=>{n!==null&&clearInterval(n),r!==null&&clearTimeout(r),n=null,r=null},i=()=>{o(),e.percent=0,e.canSucceed=!0,t.throttle?r=setTimeout(l,t.throttle):l()},p=a=>{e.percent=Math.min(100,Math.floor(e.percent+a))},h=()=>{e.percent=100,f()},f=()=>{o(),setTimeout(()=>{e.show=!1,setTimeout(()=>{e.percent=0},400)},500)},l=()=>{e.show=!0,s=1e4/Math.floor(t.duration),n=m(()=>{p(s)},100)},c=_();return c.hook("page:start",i),c.hook("page:finish",h),x(()=>o()),(a,S)=>(y(),T("div",{class:k(["nuxt-progress",{"nuxt-progress-failed":!e.canSucceed}]),style:w({width:e.percent+"%",left:e.left,height:t.height+"px",opacity:e.show?1:0,backgroundSize:(e.percent>0?100/e.percent*100:0)+"% auto"})},null,6))}});export{B as default};
