import{d as L,X as M,aL as C,aJ as G,G as i,r as a,b as n,c as d,D as I,e as r,t as b,O as V,Z as B,$ as D,g as w,f as S,H as O,F as j,a5 as F,a1 as k,aG as $}from"./entry.0e1ae4de.js";import{_ as H}from"./milestone-reward.vue.ae433769.js";import J from"./ArtCard.9f3304b7.js";import{u as U}from"./dreamStore.14f98457.js";const W={class:"bg-base-200 rounded-2xl p-8 text-lg"},X=r("h1",{class:"text-2xl mb-4"},"Art-Generator",-1),Z={class:"font-bold"},q={class:"mt-4"},z=["disabled"],K={key:0,class:"mt-4 flex flex-col items-center"},Q={class:"loader flex justify-center mt-2"},re=L({__name:"Art-Generator",setup(R){U();const _=M(),A=C(),h=G(),f=i(()=>h.selectedPitch),v=a(!1),g=i(()=>{var s;return(s=h.selectedPitch)==null?void 0:s.pitch}),u=a(""),x=a(""),P=i(()=>_.username),E=i(()=>_.userId),l=a(!1),m=a([]);a(null);const y=a(null),N=()=>{y.value=A.randomLoadMessage()},T=async()=>{var s,o;N(),l.value=!0;try{const e=await fetch("/api/art/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:g.value+", "+u.value+", "+x.value,userName:P.value,galleryName:"cafefred",pitchId:(s=f.value)==null?void 0:s.id,title:(o=f.value)==null?void 0:o.title,isMature:!1,isPublic:!0,isOrphan:!0,flavorText:x.value,userId:E.value,galleryId:21})});if(e.ok){const t=await e.json();m.value.unshift(t.newArt),v.value=!0,console.log("Art generated:",m)}else{const t=await e.text(),p=k(new Error(t));console.error("Failed to generate art:",p.message)}}catch(e){const t=k(e);console.error("Error generating art:",t.message)}finally{l.value=!1}};return(s,o)=>{const e=$,t=H,p=J;return n(),d("div",W,[X,I(" Enter your Art Prompt. We will automatically begin with the pitch: "),r("div",Z,b(V(g)),1),r("div",q,[B(r("input",{"onUpdate:modelValue":o[0]||(o[0]=c=>u.value=c),placeholder:"Enter your art prompt",class:"rounded-2xl p-2 w-full text-lg"},null,512),[[D,u.value]])]),r("button",{disabled:l.value,class:"bg-primary rounded-2xl p-2 text-white mt-4 w-full hover:bg-primary-dark",onClick:T}," Generate Art for Pitch ",8,z),l.value?(n(),d("div",K,[r("p",null,b(y.value),1),r("div",Q,[w(e)])])):S("",!0),v.value?(n(),O(t,{key:1,id:11})):S("",!0),(n(!0),d(j,null,F(m.value,c=>(n(),d("div",{key:c.id,class:"mt-4"},[w(p,{art:c},null,8,["art"])]))),128))])}}});export{re as _};
