import{_ as F}from"./Drz-eLsj.js";import{d as j,aF as z,aA as $,a0 as q,a1 as H,r as s,I as K,c as d,e as c,f as e,W as l,X as n,F as J,a7 as W,aE as X,t as Y,g as S,a2 as U,h as Q,Y as Z,a3 as R}from"./BwHe1LQq.js";const ee={class:"rounded-2xl border p-2 m-2 flex flex-col items-center"},te=e("h1",{class:"text-3xl mb-4 text-center"},"Create a New Bot",-1),oe={class:"mb-4"},se=e("label",{for:"name",class:"block text-sm font-medium"},"Name:",-1),le={class:"mb-4"},ae=e("label",{for:"subtitle",class:"block text-sm font-medium"},"Subtitle:",-1),ne={class:"mb-4"},re=e("label",{for:"description",class:"block text-sm font-medium"},"Description:",-1),ie={class:"mb-4"},ue=e("label",{for:"avatarImage",class:"block text-sm font-medium"},"Avatar Image URL:",-1),de={class:"flex flex-wrap gap-4"},ce=["src"],me=["onClick"],pe=["onClick"],be={class:"mb-4"},ve=e("label",{for:"imagePrompt",class:"block text-sm font-medium"},"Image Prompt:",-1),fe={class:"mb-4"},_e=e("label",{for:"botType",class:"block text-sm font-medium"},"Bot Type:",-1),he=e("option",{value:"PROMPTBOT"}," Prompt Bot: A bot that provides prompts ",-1),ge=e("option",{value:"CHATBOT"}," Chat Bot: A bot that can chat with users ",-1),ye=e("option",{value:"ARTBOT"},"Art Bot: A bot that creates art",-1),xe=[he,ge,ye],we={class:"mb-4"},ke=e("label",{for:"botIntro",class:"block text-sm font-medium"},"Bot Introduction:",-1),Re={class:"mb-4"},Ee=e("label",{for:"userIntro",class:"block text-sm font-medium"},"User Introduction:",-1),Ae={class:"mb-4"},Ie=e("label",{for:"prompt",class:"block text-sm font-medium"},"Prompt:",-1),Te={class:"mb-4"},Pe=e("label",{for:"sampleResponse",class:"block text-sm font-medium"},"Sample Response:",-1),Ce={key:0,class:"mt-2 text-green-500 animate-pulse"},Se={class:"mb-4"},Ue=e("label",{for:"isPublic",class:"block text-sm font-medium"},"Is Public:",-1),Be={class:"mb-4"},Ve=e("label",{for:"underConstruction",class:"block text-sm font-medium"},"Under Construction:",-1),Oe={class:"mb-4"},Ne=e("label",{for:"theme",class:"block text-sm font-medium"},"Theme:",-1),Le={class:"mb-4"},Me=e("label",{for:"personality",class:"block text-sm font-medium"},"Personality:",-1),Ge={key:0,class:"loading loading-ring loading-lg"},De=e("button",{type:"submit",class:"btn btn-success w-full"},"Create Bot",-1),$e=j({__name:"AddBot",setup(Fe){const B=z(),V=$(),O=q(),m=H(),E=s(!1),p=s("PROMPTBOT"),b=s(""),v=s("Kind Robot"),f=s("I'm a kind robot"),_=s("/images/wonderchest/wonderchest304_(23).webp"),h=s("SloganMaker"),g=s("Help me make a slogan for"),A=s("robot avatar"),u=s("Arm butterflies with mini-flamethrowers to kick mosquitos butts"),I=s(!0),y=s(!1),x=s(""),w=s("kind"),k=s(""),N=K(()=>O.userId),T=s(null);async function L(a){a.preventDefault();try{const t={botType:p.value,name:b.value,subtitle:v.value,description:f.value,avatarImage:_.value,botIntro:h.value,userIntro:g.value,prompt:u.value,isPublic:I.value,underConstruction:y.value,theme:x.value,personality:w.value,sampleResponse:k.value,userId:N.value},i=await B.addBots([t]);console.log(i)}catch(t){m.setError(R.GENERAL_ERROR,"Error creating bot: "+t.message)}}async function P(a,t){var i;try{E.value=!0;const o=t||A.value,r=await V.generateArt({prompt:o});if(r.success&&((i=r.newArt)!=null&&i.path))a!==void 0?C.value[a]=r.newArt:_.value=r.newArt.path;else if(!r.success)throw new Error(r.message||"Failed to generate or fetch avatar.")}catch(o){m.setError(R.GENERAL_ERROR,"Error generating or fetching avatar: "+o.message)}finally{E.value=!1}}async function M(){try{const a=await fetch("/api/botcafe/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:u.value})});if(a.ok){const t=await a.json();T.value=t.result}else m.setError(R.GENERAL_ERROR,"Error testing prompt: API response not OK")}catch(a){m.setError(R.GENERAL_ERROR,"Error testing prompt: "+a.message)}}const G=a=>{_.value=a},C=s([]);return P(),(a,t)=>{const i=F;return d(),c("div",ee,[te,e("form",{class:"bg-white shadow-lg rounded-lg p-8 w-full max-w-md",onSubmit:Z(L,["prevent"])},[e("div",oe,[se,l(e("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=o=>b.value=o),type:"text",class:"w-full p-2 rounded border",required:""},null,512),[[n,b.value]])]),e("div",le,[ae,l(e("input",{id:"subtitle","onUpdate:modelValue":t[1]||(t[1]=o=>v.value=o),type:"text",class:"w-full p-2 rounded border"},null,512),[[n,v.value]])]),e("div",ne,[re,l(e("textarea",{id:"description","onUpdate:modelValue":t[2]||(t[2]=o=>f.value=o),class:"resize w-full p-2 rounded border"},null,512),[[n,f.value]])]),e("div",ie,[ue,e("div",de,[(d(!0),c(J,null,W(C.value,(o,r)=>(d(),c("div",{key:o.id,class:"flex flex-col items-center"},[e("img",{src:o.path,alt:"Generated Avatar",class:"w-32 h-32 object-cover mb-2"},null,8,ce),e("button",{type:"button",onClick:D=>P(r)}," Generate Another ",8,me),e("button",{type:"button",onClick:D=>G(o.path)}," Select ",8,pe)]))),128))])]),e("div",be,[ve,l(e("input",{id:"imagePrompt","onUpdate:modelValue":t[3]||(t[3]=o=>A.value=o),type:"text",class:"w-full p-2 rounded border"},null,512),[[n,A.value]])]),e("div",fe,[_e,l(e("select",{id:"botType","onUpdate:modelValue":t[4]||(t[4]=o=>p.value=o),class:"w-full p-2 rounded border"},xe,512),[[X,p.value]])]),e("div",we,[ke,l(e("input",{id:"botIntro","onUpdate:modelValue":t[5]||(t[5]=o=>h.value=o),type:"text",class:"w-full p-2 rounded border"},null,512),[[n,h.value]])]),e("div",Re,[Ee,l(e("input",{id:"userIntro","onUpdate:modelValue":t[6]||(t[6]=o=>g.value=o),type:"text",class:"w-full p-2 rounded border"},null,512),[[n,g.value]])]),e("div",Ae,[Ie,l(e("textarea",{id:"prompt","onUpdate:modelValue":t[7]||(t[7]=o=>u.value=o),class:"resize w-full p-2 rounded border"},null,512),[[n,u.value]])]),e("div",Te,[Pe,l(e("textarea",{id:"sampleResponse","onUpdate:modelValue":t[8]||(t[8]=o=>k.value=o),class:"resize w-full p-2 rounded border"},null,512),[[n,k.value]]),e("button",{type:"button",class:"btn btn-primary mt-2",onClick:M}," Test Prompt "),T.value?(d(),c("div",Ce," Test Result: "+Y(T.value),1)):S("",!0)]),e("div",Se,[Ue,l(e("input",{id:"isPublic","onUpdate:modelValue":t[9]||(t[9]=o=>I.value=o),type:"checkbox",class:"p-2 rounded border"},null,512),[[U,I.value]])]),e("div",Be,[Ve,l(e("input",{id:"underConstruction","onUpdate:modelValue":t[10]||(t[10]=o=>y.value=o),type:"checkbox",class:"p-2 rounded border"},null,512),[[U,y.value]])]),e("div",Oe,[Ne,l(e("input",{id:"theme","onUpdate:modelValue":t[11]||(t[11]=o=>x.value=o),type:"text",class:"w-full p-2 rounded border"},null,512),[[n,x.value]])]),e("div",Le,[Me,l(e("input",{id:"personality","onUpdate:modelValue":t[12]||(t[12]=o=>w.value=o),type:"text",class:"w-full p-2 rounded border"},null,512),[[n,w.value]])]),Q(i,{name:b.value,"bot-type":p.value,subtitle:v.value,description:f.value,"avatar-image":_.value,theme:x.value,"under-construction":y.value,"bot-intro":h.value,"user-intro":g.value,prompt:u.value,personality:w.value,"sample-response":k.value},null,8,["name","bot-type","subtitle","description","avatar-image","theme","under-construction","bot-intro","user-intro","prompt","personality","sample-response"]),E.value?(d(),c("span",Ge)):S("",!0),De],32)])}}});export{$e as default};
