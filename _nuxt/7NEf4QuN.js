import z from"./BWBek36E.js";import{_ as M}from"./DuBwAjuw.js";import U from"./D-Auxfbc.js";import D from"./CaDFFSue.js";import{d as F,W as T,X as j,E as B,r as m,V as I,c as s,e as a,Y as f,h as l,g as p,f as e,t as n,k as K,G as P,n as G,a1 as W}from"./Bh_OSRoe.js";const A={class:"absolute top-2 right-2"},H={key:1},J=e("h1",{class:"text-2xl font-semibold ml-6"},"User Dashboard",-1),O={class:"relative flex justify-center items-center"},X={class:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2"},Y={class:"text-lg font-semibold bg-base-200 border-accent rounded-2xl border p-2 pt-1 pb-1"},q={class:"flex items-center space-x-4 m-2"},Q={class:"text-lg font-medium m-2 mt-4 p-1 pb-0"},Z={key:0,class:"text-sm text-gray-500 ml-2"},ee={class:"flex space-x-4 mt-2"},te={class:"flex items-center space-x-2"},se={key:0},oe={key:1},ae={class:"flex flex-row"},le={key:2,class:"flex flex-row items-center justify-between h-full"},ne={class:"flex flex-row items-center space-x-4"},re={class:"flex items-center space-x-2"},ge=F({__name:"User-Dashboard",setup(ie){const d=T(),N=j(),r=B(()=>d.user),i=B(()=>d.isLoggedIn),u=m(!1),o=m(!1),v=m(!1),x=m(""),_=()=>{o.value=!o.value};I(i,t=>{t&&(u.value=!1)});const R=async()=>{if(i.value)try{await d.logout()}catch(t){N.setError(W.AUTH_ERROR,t instanceof Error?t.message:"Failed to logout. Please try again.")}else u.value=!0,o.value&&_()},S=async()=>{try{v.value=!0,await d.logout()}catch(t){t instanceof Error?x.value=`Failed to logout. ${t.message}`:x.value="Failed to logout. Please try again."}finally{v.value=!1}};return(t,c)=>{var y,w,k,C,E,L;const g=z,h=M,V=U,b=D;return s(),a("div",{class:G(["bg-base-200 p-2 rounded-2xl relative",{"h-32":o.value}])},[o.value?p("",!0):(s(),a("button",{key:0,class:"absolute top-1 left-1 z-10",onClick:f(_,["stop"])},[l(g,{name:"game-icons:expand",class:"text-lg"})])),e("span",A,"Role: "+n(((y=r.value)==null?void 0:y.Role)||"Guest"),1),o.value?(s(),a("div",le,[e("div",{class:"flex flex-row items-center space-x-2 cursor-pointer",onClick:c[2]||(c[2]=f($=>o.value?_():null,["stop"]))},[l(h,{class:"w-12 h-12"}),e("span",null,n(((E=r.value)==null?void 0:E.username)||"Kind Guest"),1)]),e("div",ne,[e("div",re,[l(g,{name:"tdesign:bean",class:"text-2xl"}),e("span",null,n(((L=r.value)==null?void 0:L.mana)||0),1)]),e("button",{class:G(["rounded-lg text-white text-lg",i.value?"bg-warning":"bg-primary"]),onClick:f(R,["stop"])},n(i.value?"Logout":"Login"),3),l(b,{class:"flex flex-row"})])])):(s(),a("div",H,[J,e("div",O,[l(h),e("div",X,[e("h2",Y,n(((w=r.value)==null?void 0:w.username)||"Kind Guest"),1)])]),e("div",q,[e("div",null,[e("p",Q,[K(" Welcome, "+n(((k=r.value)==null?void 0:k.username)||"Guest")+" ",1),i.value?p("",!0):(s(),a("span",Z,"(Not logged in)"))]),e("div",ee,[e("div",te,[l(g,{name:"tdesign:bean",class:"text-lg"}),e("span",null,"Jellybeans: "+n(((C=r.value)==null?void 0:C.mana)||0),1)])])]),i.value?(s(),a("div",se,[e("button",{class:"bg-warning p-2 rounded-lg text-white text-lg",onClick:S}," Logout ")])):(s(),a("div",oe,[e("button",{class:"bg-primary p-2 rounded-lg text-white text-lg",onClick:c[0]||(c[0]=$=>u.value=!0)}," Login ")]))]),u.value?(s(),P(V,{key:0,onClose:c[1]||(c[1]=$=>u.value=!1)})):p("",!0),e("div",ae,[l(b,{class:"flex flex-row"})])]))],2)}}});export{ge as _};
