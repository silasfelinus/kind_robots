import{s as m}from"./D9V5i7ke.js";import{d,aB as g,u as _,aa as x,c as y,e as k,n as w,aI as B}from"./CH0slHa8.js";const v=d({__name:"LoadingBar",props:{throttle:{type:Number,default:200},duration:{type:Number,default:2e3},height:{type:Number,default:3}},setup(u){const t=u,e=g({percent:0,show:!0,canSucceed:!0,left:"0px"});let n=null,r=null,s=0;const o=()=>{n!==null&&clearInterval(n),r!==null&&clearTimeout(r),n=null,r=null},i=()=>{o(),e.percent=0,e.canSucceed=!0,t.throttle?r=setTimeout(l,t.throttle):l()},p=a=>{e.percent=Math.min(100,Math.floor(e.percent+a))},h=()=>{e.percent=100,f()},f=()=>{o(),setTimeout(()=>{e.show=!1,setTimeout(()=>{e.percent=0},400)},500)},l=()=>{e.show=!0,s=1e4/Math.floor(t.duration),n=m(()=>{p(s)},100)},c=_();return c.hook("page:start",i),c.hook("page:finish",h),x(()=>o()),(a,S)=>(y(),k("div",{class:w(["nuxt-progress",{"nuxt-progress-failed":!e.canSucceed}]),style:B({width:e.percent+"%",left:e.left,height:t.height+"px",opacity:e.show?1:0,backgroundSize:(e.percent>0?100/e.percent*100:0)+"% auto"})},null,6))}});export{v as default};
