import E from"./CzI6pVEy.js";import{_ as N}from"./DfUZz_zp.js";import{d as R,X as U,Y as V,r as f,G as C,c as i,e as c,O as n,h as x,g as m,Z as T,f as e,$ as v,a0 as y,a1 as O,w as b,k as g,t as B,a2 as w,p as M,j,l as D}from"./7SNmuExf.js";const s=u=>(M("data-v-df62786d"),u=u(),j(),u),F={class:"flex flex-col items-center p-4 rounded-2xl shadow-lg transition-all duration-300 w-full max-w-md mx-auto"},P={key:0,class:"text-center text-info"},$=s(()=>e("div",null,"Loading, please wait...",-1)),q=["autocomplete"],A={class:"mb-2 relative group"},G=s(()=>e("label",{for:"login",class:"block text-sm mb-1"},"Login:",-1)),H=s(()=>e("div",{class:"absolute right-2 bottom-2 text-xs text-gray-500 group-hover:float-tooltip"}," Login ",-1)),K={class:"mb-2 relative group"},W=s(()=>e("label",{for:"password",class:"block text-sm mb-1"},"Password (optional):",-1)),X=s(()=>e("div",{class:"absolute right-2 bottom-2 text-xs text-gray-500 group-hover:float-tooltip"}," Password (optional) ",-1)),Y={class:"flex items-center justify-between"},Z=s(()=>e("label",{for:"stayLoggedIn",class:"text-sm"},"Stay Logged in",-1)),z=s(()=>e("button",{type:"submit",class:"bg-info text-default py-1 px-3 rounded"}," Login ",-1)),J={class:"text-center mt-2"},Q={key:2,class:"text-warning mt-2 w-full text-center"},ee={key:0},te={class:"mt-2"},oe={class:"text-accent underline"},se=R({__name:"LoginForm",setup(u){const o=U(),a=V(),_=f(""),r=f(""),L=C(()=>o.isLoggedIn),p=f(!1),k=async()=>{a.clearError(),p.value=!1;try{const l={username:_.value};r.value&&(l.password=r.value);const t=await o.login(l);t.success&&o.stayLoggedIn?o.setStayLoggedIn(!0):(a.setError(w.AUTH_ERROR,t.message),t.message.includes("User not found")&&(p.value=!0))}catch(l){a.setError(w.UNKNOWN_ERROR,l)}},I=()=>{_.value="",r.value="",a.clearError(),p.value=!1};return(l,t)=>{const S=E,h=N;return i(),c("div",F,[n(o).loading?(i(),c("div",P,[x(S,{name:"tabler:loader",class:"animate-spin text-lg mb-2"}),$])):m("",!0),L.value?m("",!0):(i(),c("form",{key:1,class:"space-y-4 w-full",autocomplete:n(o).stayLoggedIn?"on":"off",onSubmit:T(k,["prevent"])},[e("div",A,[G,v(e("input",{id:"login","onUpdate:modelValue":t[0]||(t[0]=d=>_.value=d),type:"text",autocomplete:"username",class:"w-full p-2 border rounded",required:""},null,512),[[y,_.value]]),H]),e("div",K,[W,v(e("input",{id:"password","onUpdate:modelValue":t[1]||(t[1]=d=>r.value=d),type:"password",autocomplete:"current-password",class:"w-full p-2 border rounded"},null,512),[[y,r.value]]),X]),e("div",Y,[e("div",null,[v(e("input",{id:"stayLoggedIn","onUpdate:modelValue":t[2]||(t[2]=d=>n(o).stayLoggedIn=d),type:"checkbox",class:"mr-2"},null,512),[[O,n(o).stayLoggedIn]]),Z]),z]),e("div",J,[x(h,{to:"/register",class:"text-accent underline"},{default:b(()=>[g(" Register ")]),_:1})])],40,q)),n(a).message?(i(),c("div",Q,[g(B(n(a).message)+" ",1),p.value?(i(),c("div",ee,[e("div",te,[e("button",oe,[x(h,{to:"/register",class:"text-accent underline"},{default:b(()=>[g(" Register ")]),_:1})]),g(" or "),e("button",{class:"text-accent underline",onClick:I}," Try a different login ")])])):m("",!0)])):m("",!0)])}}}),le=D(se,[["__scopeId","data-v-df62786d"]]);export{le as default};
