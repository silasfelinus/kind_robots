import{aH as C,a1 as l,d as I,X as N,r as v,o as B,G as T,b as c,c as p,e as a,O as r,Z as j,$ as D,f as P,F as $,a5 as V,D as F,t as b,p as O,i as H,k as L}from"./entry.db0b0373.js";const M=C("promptStore",{state:()=>({artPrompts:[],artByPromptId:[],activePrompt:null}),actions:{async fetchArtPrompts(){try{console.log("About to fetch data...");const t=await fetch("/api/art/prompts/all");if(console.log("Fetched data:",t),t.ok){const e=await t.json();this.artPrompts=e.artPrompts}}catch(t){const e=l(t);console.error("Error in fetchArtPrompts:",e.message)}},async editArtPrompt(t,e){try{const d=await(await fetch("/api/art/prompts",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,prompt:e})})).json();if(d.success){const m=this.artPrompts.findIndex(u=>u.id===t);m!==-1&&(this.artPrompts[m].prompt=e)}else throw new Error(d.message)}catch(o){l({success:!1,message:o.message})}},async fetchArtByPromptId(t){try{const e=await fetch(`/api/art/prompts/${t}`);e.ok&&(this.artByPromptId=await e.json())}catch(e){const o=l(e);console.error("Error in fetchArtByPromptId:",o.message)}},selectPrompt(t){this.activePrompt=t},clearPrompt(){this.activePrompt=null},async createArtPrompt(t){try{const e=await fetch("/api/art/prompts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:t})});if(e.ok){const o=await e.json();this.artPrompts.push(o)}}catch(e){const o=l(e);console.error("Error in createArtPrompt:",o.message)}},async deleteArtPrompt(t){try{(await fetch(`/api/art/prompts/${t}`,{method:"DELETE"})).ok&&(this.artPrompts=this.artPrompts.filter(o=>o.id!==t))}catch(e){const o=l(e);console.error("Error in deleteArtPrompt:",o.message)}}}}),J=t=>(O("data-v-2c447610"),t=t(),H(),t),U={class:"art-prompts rounded-2xl border bg-base-200 flex flex-col m-4 p-4 text-lg"},G=J(()=>a("h1",null,"Art Prompts",-1)),R={key:0,class:"input-section"},X=["disabled"],Z=["onClick"],q={key:0},z=["onClick"],K=["onClick"],Q={key:1},W=I({__name:"ArtPrompts",setup(t){const e=M(),{fetchArtPrompts:o,selectPrompt:d,artPrompts:m,activePrompt:u,createArtPrompt:A,deleteArtPrompt:k}=e,f=N(),_=f.role,n=v(""),x=v(null),w=i=>{x.value=i,n.value=i.prompt};B(()=>{o()});const y=T(()=>n.value.trim().length>0),E=()=>{y.value&&(A(n.value.trim()),n.value="")},S=i=>{k(i)};return(i,h)=>(c(),p("div",U,[G,a("button",{onClick:h[0]||(h[0]=(...s)=>r(o)&&r(o)(...s))},"Fetch Art Prompts"),r(_)==="admin"?(c(),p("div",R,[j(a("input",{"onUpdate:modelValue":h[1]||(h[1]=s=>n.value=s),placeholder:"New Prompt",class:"input-styling"},null,512),[[D,n.value]]),a("button",{disabled:!r(y),class:"add-button",onClick:E},"Add Prompt",8,X)])):P("",!0),a("ul",null,[(c(!0),p($,null,V(r(m),s=>(c(),p("li",{key:s.id},[F(b(s.prompt)+" ",1),a("button",{onClick:g=>r(d)(s)},"Select",8,Z),r(_)==="ADMIN"&&r(f).isLoggedIn?(c(),p("span",q,[a("button",{class:"rounded-2xl border bg-base-200 flex p-2 m-2",onClick:g=>w(s)},"Edit",8,z),a("button",{class:"rounded-2xl border bg-base-200 flex p-2 m-2",onClick:g=>S(s.id)},"Delete",8,K)])):P("",!0)]))),128))]),r(u)?(c(),p("div",Q,[a("h2",null,"Selected Prompt: "+b(r(u).prompt),1)])):P("",!0)]))}});const tt=L(W,[["__scopeId","data-v-2c447610"]]);export{tt as default};
