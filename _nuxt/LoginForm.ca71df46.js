import I from"./Icon.8220a93b.js";import{_ as S}from"./nuxt-link.999228b6.js";import{d as V,X as N,r as g,G as C,b as i,c as d,O as c,g as v,f as m,Y as U,e,Z as x,$ as h,a0 as M,w as y,D as f,t as B,a1 as D,p as F,i as R,k as T}from"./entry.0e1ae4de.js";const s=u=>(F("data-v-8b4093fb"),u=u(),R(),u),P={class:"flex flex-col items-center p-4 rounded-2xl shadow-lg transition-all duration-300 w-full max-w-md mx-auto"},$={key:0,class:"text-center text-info"},j=s(()=>e("div",null,"Loading, please wait...",-1)),q=["autocomplete","onSubmit"],E={class:"mb-2 relative group"},G=s(()=>e("label",{for:"login",class:"block text-sm mb-1"},"Login:",-1)),H=s(()=>e("div",{class:"absolute right-2 bottom-2 text-xs text-gray-500 group-hover:float-tooltip"},"Login",-1)),O={class:"mb-2 relative group"},X=s(()=>e("label",{for:"password",class:"block text-sm mb-1"},"Password (optional):",-1)),Y=s(()=>e("div",{class:"absolute right-2 bottom-2 text-xs text-gray-500 group-hover:float-tooltip"},"Password (optional)",-1)),Z={class:"flex items-center justify-between"},z=s(()=>e("label",{for:"stayLoggedIn",class:"text-sm"},"Stay Logged in",-1)),A=s(()=>e("button",{type:"submit",class:"bg-info text-default py-1 px-3 rounded"},"Login",-1)),J={class:"text-center mt-2"},K={key:2,class:"text-warning mt-2 w-full text-center"},Q={key:0},W={class:"mt-2"},ee={class:"text-accent underline"},te=V({__name:"LoginForm",setup(u){const o=N(),_=g(""),n=g(""),a=g("");C(()=>o.isLoggedIn);const p=g(!1),w=async()=>{a.value="",p.value=!1;try{const l={username:_.value};n.value&&(l.password=n.value);const t=await o.login(l);t.success&&o.stayLoggedIn?o.setStayLoggedIn(!0):(a.value=t.message,t.message.includes("User not found")&&(p.value=!0))}catch(l){a.value=D(l).message}},L=()=>{_.value="",n.value="",a.value="",p.value=!1};return(l,t)=>{const k=I,b=S;return i(),d("div",P,[c(o).loading?(i(),d("div",$,[v(k,{name:"tabler:loader",class:"animate-spin text-lg mb-2"}),j])):m("",!0),c(o).isLoggedIn?m("",!0):(i(),d("form",{key:1,class:"space-y-4 w-full",autocomplete:c(o).stayLoggedIn?"on":"off",onSubmit:U(w,["prevent"])},[e("div",E,[G,x(e("input",{id:"login","onUpdate:modelValue":t[0]||(t[0]=r=>_.value=r),type:"text",autocomplete:"username",class:"w-full p-2 border rounded",required:""},null,512),[[h,_.value]]),H]),e("div",O,[X,x(e("input",{id:"password","onUpdate:modelValue":t[1]||(t[1]=r=>n.value=r),type:"password",autocomplete:"current-password",class:"w-full p-2 border rounded"},null,512),[[h,n.value]]),Y]),e("div",Z,[e("div",null,[x(e("input",{id:"stayLoggedIn","onUpdate:modelValue":t[2]||(t[2]=r=>c(o).stayLoggedIn=r),type:"checkbox",class:"mr-2"},null,512),[[M,c(o).stayLoggedIn]]),z]),A]),e("div",J,[v(b,{to:"/register",class:"text-accent underline"},{default:y(()=>[f("Register")]),_:1})])],40,q)),a.value?(i(),d("div",K,[f(B(a.value)+" ",1),p.value?(i(),d("div",Q,[e("div",W,[e("button",ee,[v(b,{to:"/register",class:"text-accent underline"},{default:y(()=>[f("Register")]),_:1})]),f(" or "),e("button",{class:"text-accent underline",onClick:L},"Try a different login")])])):m("",!0)])):m("",!0)])}}});const ne=T(te,[["__scopeId","data-v-8b4093fb"]]);export{ne as default};
