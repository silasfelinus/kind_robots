import{_ as I}from"./DKGiKGuy.js";import{_ as L,c as T}from"./D4QKc5ua.js";import{aH as U,d as A,a0 as F,I as C,r as l,o as W,V as z,c as n,e as r,f as t,h as G,W as K,aE as Y,F as V,a7 as $,t as h,Z,g as _,n as j,k as q,p as J,j as O,l as Q}from"./BwHe1LQq.js";const X=U("/images/kindtitle.webp"),g=f=>(J("data-v-aa3dd325"),f=f(),O(),f),ee={class:"container mx-auto px-4 py-8 min-h-screen flex flex-col items-center space-y-6"},te={class:"text-center space-y-2"},ae=g(()=>t("h1",{class:"text-4xl font-bold"},"Kind Robots Memory Game",-1)),se=g(()=>t("p",{class:"text-gray-600"},"Match the images and test your memory!",-1)),oe={class:"difficulty-controls"},le=g(()=>t("label",{for:"difficulty"},"Select Difficulty: ",-1)),ne=["value"],re={class:"game-board w-full max-w-4xl flex flex-wrap justify-center items-center"},ie={key:0,class:"loader mt-4"},ce=["onClick"],ue=g(()=>t("img",{class:"card-back absolute inset-0 w-full h-full object-cover",src:X,alt:"Memory Card"},null,-1)),de=["src","alt"],fe={class:"game-controls mt-4 flex flex-col items-center space-y-2","aria-live":"polite",role:"status"},me={key:1,class:"mt-2 space-y-2 text-center"},ve=A({__name:"MemoryGame",setup(f){var R;const b=F(),P=C(()=>b.user),y=C(()=>b.matchRecord),B=()=>{T({particleCount:100,spread:70,origin:{y:.6}})},m=l([]),M=[{label:"Easy",value:8},{label:"Medium",value:12},{label:"Hard",value:16}],v=l(M[0]),x=l(!1),i=l(null),k=l(!1),p=l(!0);function N(){return typeof window<"u"}const c=l(0);if(N()){const e=(R=P.value)==null?void 0:R.matchRecord;e&&(c.value=Number(e))}let s=null;async function E(){try{p.value=!0,x.value=!1;const e=Math.ceil(v.value.value/2),d=await(await fetch(`/api/galleries/random/count/${e}`)).json();if(d.images.length!==e)throw new Error("Received an unexpected number of images.");m.value=d.images.concat(d.images).map((S,a)=>({id:a,galleryName:"",imagePath:S,flipped:!1,matched:!1})).sort(()=>.5-Math.random()),p.value=!1}catch(e){p.value=!1,console.error("Error generating images:",e),i.value={type:"error",message:"Error generating images. Please try again later."}}}const o=l(0);function D(e){e.flipped||e.matched||(e.flipped=!0,s?s&&s.imagePath===e.imagePath?(e.matched=!0,s.matched=!0,o.value+=10,setTimeout(()=>{s=null},500),m.value.every(u=>u.matched)&&(x.value=!0,B(),(y.value<o.value||y.value===null)&&b.updateMatchRecord(o.value),o.value>=50&&(k.value=!0),(o.value>c.value||o.value>y.value)&&(c.value=o.value,N()&&localStorage.setItem("highScore",c.value.toString())))):(o.value-=5,setTimeout(()=>{e.flipped=!1,s&&(s.flipped=!1),s=null},500)):s=e)}const H=C(()=>{const e="notification py-2 px-4 rounded-lg mb-2";return i.value?i.value.type==="error"?`${e} bg-red-200 text-red-700`:`${e} bg-green-200 text-green-700`:e});function w(){m.value.forEach(e=>{e.flipped=!1,e.matched=!1}),o.value=0,s=null,E()}return W(E),z(v,w),(e,u)=>{const d=I,S=L;return n(),r("div",ee,[t("header",te,[ae,se,G(d),t("div",oe,[le,K(t("select",{id:"difficulty","onUpdate:modelValue":u[0]||(u[0]=a=>v.value=a)},[(n(),r(V,null,$(M,a=>t("option",{key:a.label,value:a},h(a.label),9,ne)),64))],512),[[Y,v.value]]),t("button",{class:"rounded-2xl text-white bg-primary p-2 m-1 border",onClick:w}," Start New Game "),k.value?(n(),Z(S,{key:0,id:5})):_("",!0)])]),t("div",re,[p.value?(n(),r("div",ie)):_("",!0),(n(!0),r(V,null,$(m.value,a=>(n(),r("div",{key:a.id,class:"gallery-display m-4 hover:scale-105 transform transition-transform duration-300 relative rounded-xl overflow-hidden w-screen cursor-pointer",onClick:pe=>D(a)},[t("div",{class:j({flipped:a.flipped||a.matched})},[ue,t("img",{class:"card-front absolute inset-0 w-full h-full object-cover",src:a.imagePath,alt:a.galleryName},null,8,de)],2)],8,ce))),128))]),t("div",fe,[i.value?(n(),r("div",{key:0,class:j(H.value)},h(i.value.message),3)):_("",!0),t("div",null,"Score: "+h(o.value),1),t("div",null,"High Score: "+h(c.value),1),x.value?(n(),r("div",me,[q(" Congratulations! You've won! "),t("button",{class:"btn btn-info mt-2 px-4 py-2 bg-blue-500 text-default rounded hover:bg-blue-600 focus:outline-none focus:ring focus:ring-blue-200 transition-colors",onClick:w}," Play Again? ")])):_("",!0)])])}}}),be=Q(ve,[["__scopeId","data-v-aa3dd325"]]);export{be as default};
