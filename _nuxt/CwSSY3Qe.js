import O from"./DFMobfPT.js";import{_ as I}from"./D4QKc5ua.js";import C from"./E5vIrAFo.js";import{d as L,a0 as V,ay as B,a1 as D,I as u,r as a,c as n,e as d,k as W,f as o,t as S,W as $,X as j,h as b,g as w,Z as F,F as G,a7 as U,a3 as E}from"./BwHe1LQq.js";import{u as K}from"./CahFLF8R.js";import{u as J}from"./CWOjJTAn.js";const X={class:"bg-base-200 rounded-2xl p-8 text-lg"},Z=o("h1",{class:"text-2xl mb-4"},"Art-Generator",-1),q={class:"font-bold"},z={class:"mt-4"},H=["disabled"],Q={key:0,class:"mt-4 flex flex-col items-center"},Y={class:"loader flex justify-center mt-2"},ce=L({__name:"Art-Generator",setup(ee){const k=K(),p=V(),N=J(),_=B(),f=D(),h=u(()=>_.selectedPitch),v=u(()=>{var e;return((e=_.selectedPitch)==null?void 0:e.pitch)||""}),l=a(""),g=a(""),P=u(()=>p.username),R=u(()=>p.userId),c=a(!1),m=a([]),x=a(null),y=a(!1),T=()=>{x.value=N.randomLoadMessage()};(()=>{const e=k.randomDream();e&&(l.value=e)})();const A=async()=>{var e,s;T(),c.value=!0;try{const t=await fetch("/api/art/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:`${v.value}, ${l.value}, ${g.value}`,userName:P.value,galleryName:"cafefred",pitchId:(e=h.value)==null?void 0:e.id,title:(s=h.value)==null?void 0:s.title,isMature:!1,isPublic:!0,isOrphan:!0,flavorText:g.value,userId:R.value,galleryId:21})});if(t.ok){const r=await t.json();m.value.unshift(r.newArt),y.value=!0,console.log("Art generated:",m)}else{const r=await t.text();f.setError(E.NETWORK_ERROR,r),console.error("Failed to generate art:",r)}}catch(t){const r=t instanceof Error?t.message:String(t);f.setError(E.UNKNOWN_ERROR,r),console.error("Error generating art:",r)}finally{c.value=!1}};return(e,s)=>{const t=O,r=I,M=C;return n(),d("div",X,[Z,W(" Enter your Art Prompt. We will automatically begin with the pitch: "),o("div",q,S(v.value),1),o("div",z,[$(o("input",{"onUpdate:modelValue":s[0]||(s[0]=i=>l.value=i),placeholder:"Enter your art prompt",class:"rounded-2xl p-2 w-full text-lg"},null,512),[[j,l.value]])]),o("button",{disabled:c.value,class:"bg-primary rounded-2xl p-2 text-white mt-4 w-full hover:bg-primary-dark",onClick:A}," Generate Art for Pitch ",8,H),c.value?(n(),d("div",Q,[o("p",null,S(x.value),1),o("div",Y,[b(t)])])):w("",!0),y.value?(n(),F(r,{key:1,id:11})):w("",!0),(n(!0),d(G,null,U(m.value,i=>(n(),d("div",{key:i.id,class:"mt-4"},[b(M,{art:i},null,8,["art"])]))),128))])}}});export{ce as _};
