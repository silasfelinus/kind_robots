import N from"./Icon.8fb0f34d.js";import{_ as C}from"./nuxt-link.1dfe2cb3.js";import{d as I,W as P,r as l,o as U,b as n,c as r,e,g,N as f,t as h,X as M,Y as x,Z as w,$ as O,w as B,C as T,f as y,a0 as q,p as D,i as E,k as G}from"./entry.9d1d6f43.js";const o=u=>(D("data-v-428817e0"),u=u(),E(),u),H={class:"relative flex items-center h-36 w-36"},J=o(()=>e("span",{class:"ml-2 text-base-200"},"Login",-1)),K={key:0,class:"absolute top-4 left-1/2 transform -translate-x-1/2 bg-base-200 p-4 rounded-2xl shadow-lg transition-all duration-300"},$={key:0,class:"text-center text-info"},j=o(()=>e("div",null,"Loading, please wait...",-1)),R={key:1,class:"text-center"},W={class:"mb-4"},X={class:"text-lg font-semibold"},Y=["autocomplete","onSubmit"],Z={class:"mb-2 relative group"},z=o(()=>e("label",{for:"login",class:"block text-sm mb-1"},"Login:",-1)),A=o(()=>e("div",{class:"absolute right-2 bottom-2 text-xs text-gray-500 group-hover:float-tooltip"}," Login ",-1)),F={class:"mb-2 relative group"},Q=o(()=>e("label",{for:"password",class:"block text-sm mb-1"},"Password:",-1)),ee=o(()=>e("div",{class:"absolute right-2 bottom-2 text-xs text-gray-500 group-hover:float-tooltip"}," Password ",-1)),te={class:"flex items-center justify-between"},se=o(()=>e("label",{for:"savePassword",class:"text-sm"},"Save Password",-1)),oe=o(()=>e("button",{type:"submit",class:"bg-info text-default py-1 px-3 rounded"},"Login",-1)),ae={class:"text-center mt-2"},le={key:3,class:"text-warning mt-2"},ne=I({__name:"OldLogin",setup(u){const a=P(),_=l(""),p=l(""),m=l(!0),v=l(!0),i=l(""),d=l(a.username!==null&&a.username!=="Kind Guest"),k=()=>{v.value=!v.value},L=async()=>{i.value="";try{const t=await a.login({username:_.value,password:p.value});t.success?d.value=!0:i.value=t.message}catch(t){i.value=q(t).message}},S=()=>{a.logout(),d.value=!1};return U(()=>{const t=JSON.parse(localStorage.getItem("user")||"null");t&&t.username!=="Kind Guest"&&(a.setUser(t),d.value=!0),window.addEventListener("login-success",s=>{localStorage.setItem("user",JSON.stringify(s.detail.user)),d.value=!0})}),(t,s)=>{const b=N,V=C;return n(),r("div",H,[e("div",{class:"flex items-center cursor-pointer",onClick:k},[g(b,{name:"tabler:login",class:"text-base-200 text-2xl",title:"Toggle Login"}),J]),v.value?(n(),r("div",K,[f(a).loading?(n(),r("div",$,[g(b,{name:"tabler:loader",class:"animate-spin text-lg mb-2"}),j])):d.value?(n(),r("div",R,[e("div",W,[e("span",X,"Hello, "+h(f(a).username)+" ðŸŽ‰",1)]),e("button",{class:"bg-warning text-default py-1 px-3 rounded",onClick:S}," Logout ")])):(n(),r("form",{key:2,class:"space-y-4",autocomplete:m.value?"on":"off",onSubmit:M(L,["prevent"])},[e("div",Z,[z,x(e("input",{id:"login","onUpdate:modelValue":s[0]||(s[0]=c=>_.value=c),type:"text",autocomplete:"username",class:"w-full p-2 border rounded",required:""},null,512),[[w,_.value]]),A]),e("div",F,[Q,x(e("input",{id:"password","onUpdate:modelValue":s[1]||(s[1]=c=>p.value=c),type:"password",autocomplete:"current-password",class:"w-full p-2 border rounded",required:""},null,512),[[w,p.value]]),ee]),e("div",te,[e("div",null,[x(e("input",{id:"savePassword","onUpdate:modelValue":s[2]||(s[2]=c=>m.value=c),type:"checkbox",class:"mr-2"},null,512),[[O,m.value]]),se]),oe]),e("div",ae,[g(V,{to:"/register",class:"text-accent underline"},{default:B(()=>[T("Register")]),_:1})])],40,Y)),i.value?(n(),r("div",le,h(i.value),1)):y("",!0)])):y("",!0)])}}});const ce=G(ne,[["__scopeId","data-v-428817e0"]]);export{ce as default};
