import{d as G,a0 as M,a1 as U,I as B,r as m,V as D,c as t,e as a,Y as f,h as l,g as p,f as e,t as n,k as F,Z as I,n as N,a3 as T,$ as j}from"./BwHe1LQq.js";import{_ as K}from"./7rIZxDx7.js";import P from"./C2v0zErS.js";import A from"./BJCzWkIJ.js";const H={class:"absolute top-2 right-2"},J={key:1},O=e("h1",{class:"text-2xl font-semibold ml-6"},"User Dashboard",-1),W={class:"relative flex justify-center items-center"},Y={class:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2"},Z={class:"text-lg font-semibold bg-base-200 border-accent rounded-2xl border p-2 pt-1 pb-1"},q={class:"flex items-center space-x-4 m-2"},Q={class:"text-lg font-medium m-2 mt-4 p-1 pb-0"},X={key:0,class:"text-sm text-gray-500 ml-2"},ee={class:"flex space-x-4 mt-2"},se={class:"flex items-center space-x-2"},te={key:0},oe={key:1},ae={class:"flex flex-row"},le={key:2,class:"flex flex-row items-center justify-between h-full"},ne={class:"flex flex-row items-center space-x-4"},re={class:"flex items-center space-x-2"},_e=G({__name:"User-Dashboard",setup(ie){const d=M(),R=U(),r=B(()=>d.user),i=B(()=>d.isLoggedIn),u=m(!1),o=m(!1),v=m(!1),x=m(""),_=()=>{o.value=!o.value};D(i,s=>{s&&(u.value=!1)});const S=async()=>{if(i.value)try{await d.logout()}catch(s){R.setError(T.AUTH_ERROR,s instanceof Error?s.message:"Failed to logout. Please try again.")}else u.value=!0,o.value&&_()},V=async()=>{try{v.value=!0,await d.logout()}catch(s){s instanceof Error?x.value=`Failed to logout. ${s.message}`:x.value="Failed to logout. Please try again."}finally{v.value=!1}};return(s,c)=>{var y,w,k,C,L,E;const g=j,h=K,z=P,b=A;return t(),a("div",{class:N(["bg-base-200 p-2 rounded-2xl relative",{"h-32":o.value}])},[o.value?p("",!0):(t(),a("button",{key:0,class:"absolute top-1 left-1 z-10",onClick:f(_,["stop"])},[l(g,{name:"game-icons:expand",class:"text-lg"})])),e("span",H,"Role: "+n(((y=r.value)==null?void 0:y.Role)||"Guest"),1),o.value?(t(),a("div",le,[e("div",{class:"flex flex-row items-center space-x-2 cursor-pointer",onClick:c[2]||(c[2]=f($=>o.value?_():null,["stop"]))},[l(h,{class:"w-12 h-12"}),e("span",null,n(((L=r.value)==null?void 0:L.username)||"Kind Guest"),1)]),e("div",ne,[e("div",re,[l(g,{name:"tdesign:bean",class:"text-2xl"}),e("span",null,n(((E=r.value)==null?void 0:E.mana)||0),1)]),e("button",{class:N(["rounded-lg text-white text-lg",i.value?"bg-warning":"bg-primary"]),onClick:f(S,["stop"])},n(i.value?"Logout":"Login"),3),l(b,{class:"flex flex-row"})])])):(t(),a("div",J,[O,e("div",W,[l(h),e("div",Y,[e("h2",Z,n(((w=r.value)==null?void 0:w.username)||"Kind Guest"),1)])]),e("div",q,[e("div",null,[e("p",Q,[F(" Welcome, "+n(((k=r.value)==null?void 0:k.username)||"Guest")+" ",1),i.value?p("",!0):(t(),a("span",X,"(Not logged in)"))]),e("div",ee,[e("div",se,[l(g,{name:"tdesign:bean",class:"text-lg"}),e("span",null,"Jellybeans: "+n(((C=r.value)==null?void 0:C.mana)||0),1)])])]),i.value?(t(),a("div",te,[e("button",{class:"bg-warning p-2 rounded-lg text-white text-lg",onClick:V}," Logout ")])):(t(),a("div",oe,[e("button",{class:"bg-primary p-2 rounded-lg text-white text-lg",onClick:c[0]||(c[0]=$=>u.value=!0)}," Login ")]))]),u.value?(t(),I(z,{key:0,onClose:c[1]||(c[1]=$=>u.value=!1)})):p("",!0),e("div",ae,[l(b,{class:"flex flex-row"})])]))],2)}}});export{_e as _};
