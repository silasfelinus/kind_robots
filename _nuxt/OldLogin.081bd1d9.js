import I from"./Icon.98c1e922.js";import{_ as N}from"./nuxt-link.0f2a5a85.js";import{d as C,X as O,r as l,o as P,b as n,c as r,e,g,O as f,t as h,Y as U,Z as x,$ as w,a0 as M,w as B,j as T,f as y,a1 as j,p as q,i as D,l as E}from"./entry.540372c9.js";const o=u=>(q("data-v-018b4ddc"),u=u(),D(),u),G={class:"relative flex items-center h-36 w-36"},H=o(()=>e("span",{class:"ml-2 text-base-200"},"Login",-1)),J={key:0,class:"absolute top-4 left-1/2 transform -translate-x-1/2 bg-base-200 p-4 rounded-2xl shadow-lg transition-all duration-300"},K={key:0,class:"text-center text-info"},$=o(()=>e("div",null,"Loading, please wait...",-1)),R={key:1,class:"text-center"},X={class:"mb-4"},Y={class:"text-lg font-semibold"},Z=["autocomplete","onSubmit"],z={class:"mb-2 relative group"},A=o(()=>e("label",{for:"login",class:"block text-sm mb-1"},"Login:",-1)),F=o(()=>e("div",{class:"absolute right-2 bottom-2 text-xs text-gray-500 group-hover:float-tooltip"},"Login",-1)),Q={class:"mb-2 relative group"},W=o(()=>e("label",{for:"password",class:"block text-sm mb-1"},"Password:",-1)),ee=o(()=>e("div",{class:"absolute right-2 bottom-2 text-xs text-gray-500 group-hover:float-tooltip"},"Password",-1)),te={class:"flex items-center justify-between"},se=o(()=>e("label",{for:"savePassword",class:"text-sm"},"Save Password",-1)),oe=o(()=>e("button",{type:"submit",class:"bg-info text-default py-1 px-3 rounded"},"Login",-1)),ae={class:"text-center mt-2"},le={key:3,class:"text-warning mt-2"},ne=C({__name:"OldLogin",setup(u){const a=O(),_=l(""),p=l(""),m=l(!0),v=l(!0),i=l(""),d=l(a.username!==null&&a.username!=="Kind Guest"),L=()=>{v.value=!v.value},k=async()=>{i.value="";try{const t=await a.login({username:_.value,password:p.value});t.success?d.value=!0:i.value=t.message}catch(t){i.value=j(t).message}},S=()=>{a.logout(),d.value=!1};return P(()=>{const t=JSON.parse(localStorage.getItem("user")||"null");t&&t.username!=="Kind Guest"&&(a.setUser(t),d.value=!0),window.addEventListener("login-success",s=>{localStorage.setItem("user",JSON.stringify(s.detail.user)),d.value=!0})}),(t,s)=>{const b=I,V=N;return n(),r("div",G,[e("div",{class:"flex items-center cursor-pointer",onClick:L},[g(b,{name:"tabler:login",class:"text-base-200 text-2xl",title:"Toggle Login"}),H]),v.value?(n(),r("div",J,[f(a).loading?(n(),r("div",K,[g(b,{name:"tabler:loader",class:"animate-spin text-lg mb-2"}),$])):d.value?(n(),r("div",R,[e("div",X,[e("span",Y,"Hello, "+h(f(a).username)+" ðŸŽ‰",1)]),e("button",{class:"bg-warning text-default py-1 px-3 rounded",onClick:S},"Logout")])):(n(),r("form",{key:2,class:"space-y-4",autocomplete:m.value?"on":"off",onSubmit:U(k,["prevent"])},[e("div",z,[A,x(e("input",{id:"login","onUpdate:modelValue":s[0]||(s[0]=c=>_.value=c),type:"text",autocomplete:"username",class:"w-full p-2 border rounded",required:""},null,512),[[w,_.value]]),F]),e("div",Q,[W,x(e("input",{id:"password","onUpdate:modelValue":s[1]||(s[1]=c=>p.value=c),type:"password",autocomplete:"current-password",class:"w-full p-2 border rounded",required:""},null,512),[[w,p.value]]),ee]),e("div",te,[e("div",null,[x(e("input",{id:"savePassword","onUpdate:modelValue":s[2]||(s[2]=c=>m.value=c),type:"checkbox",class:"mr-2"},null,512),[[M,m.value]]),se]),oe]),e("div",ae,[g(V,{to:"/register",class:"text-accent underline"},{default:B(()=>[T("Register")]),_:1})])],40,Z)),i.value?(n(),r("div",le,h(i.value),1)):y("",!0)])):y("",!0)])}}});const ce=E(ne,[["__scopeId","data-v-018b4ddc"]]);export{ce as default};
