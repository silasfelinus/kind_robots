import N from"./BWBek36E.js";import{_ as S}from"./BNBFR6TF.js";import{d as R,W as U,X as V,r as f,E as C,c as d,e as c,N as n,h as x,g as m,Y as T,f as e,Z as v,$ as y,a0 as B,w as b,k as g,t as M,a1 as w,p as O,j,l as D}from"./Bh_OSRoe.js";import"./Bm4K94d7.js";import"./CwLGbeD0.js";const s=u=>(O("data-v-df62786d"),u=u(),j(),u),F={class:"flex flex-col items-center p-4 rounded-2xl shadow-lg transition-all duration-300 w-full max-w-md mx-auto"},P={key:0,class:"text-center text-info"},W=s(()=>e("div",null,"Loading, please wait...",-1)),$=["autocomplete"],q={class:"mb-2 relative group"},A=s(()=>e("label",{for:"login",class:"block text-sm mb-1"},"Login:",-1)),H=s(()=>e("div",{class:"absolute right-2 bottom-2 text-xs text-gray-500 group-hover:float-tooltip"}," Login ",-1)),K={class:"mb-2 relative group"},X=s(()=>e("label",{for:"password",class:"block text-sm mb-1"},"Password (optional):",-1)),Y=s(()=>e("div",{class:"absolute right-2 bottom-2 text-xs text-gray-500 group-hover:float-tooltip"}," Password (optional) ",-1)),Z={class:"flex items-center justify-between"},z=s(()=>e("label",{for:"stayLoggedIn",class:"text-sm"},"Stay Logged in",-1)),G=s(()=>e("button",{type:"submit",class:"bg-info text-default py-1 px-3 rounded"}," Login ",-1)),J={class:"text-center mt-2"},Q={key:2,class:"text-warning mt-2 w-full text-center"},ee={key:0},te={class:"mt-2"},oe={class:"text-accent underline"},se=R({__name:"LoginForm",setup(u){const o=U(),a=V(),p=f(""),r=f(""),L=C(()=>o.isLoggedIn),_=f(!1),k=async()=>{a.clearError(),_.value=!1;try{const l={username:p.value};r.value&&(l.password=r.value);const t=await o.login(l);t.success&&o.stayLoggedIn?o.setStayLoggedIn(!0):(a.setError(w.AUTH_ERROR,t.message),t.message.includes("User not found")&&(_.value=!0))}catch(l){a.setError(w.UNKNOWN_ERROR,l)}},I=()=>{p.value="",r.value="",a.clearError(),_.value=!1};return(l,t)=>{const E=N,h=S;return d(),c("div",F,[n(o).loading?(d(),c("div",P,[x(E,{name:"tabler:loader",class:"animate-spin text-lg mb-2"}),W])):m("",!0),L.value?m("",!0):(d(),c("form",{key:1,class:"space-y-4 w-full",autocomplete:n(o).stayLoggedIn?"on":"off",onSubmit:T(k,["prevent"])},[e("div",q,[A,v(e("input",{id:"login","onUpdate:modelValue":t[0]||(t[0]=i=>p.value=i),type:"text",autocomplete:"username",class:"w-full p-2 border rounded",required:""},null,512),[[y,p.value]]),H]),e("div",K,[X,v(e("input",{id:"password","onUpdate:modelValue":t[1]||(t[1]=i=>r.value=i),type:"password",autocomplete:"current-password",class:"w-full p-2 border rounded"},null,512),[[y,r.value]]),Y]),e("div",Z,[e("div",null,[v(e("input",{id:"stayLoggedIn","onUpdate:modelValue":t[2]||(t[2]=i=>n(o).stayLoggedIn=i),type:"checkbox",class:"mr-2"},null,512),[[B,n(o).stayLoggedIn]]),z]),G]),e("div",J,[x(h,{to:"/register",class:"text-accent underline"},{default:b(()=>[g(" Register ")]),_:1})])],40,$)),n(a).message?(d(),c("div",Q,[g(M(n(a).message)+" ",1),_.value?(d(),c("div",ee,[e("div",te,[e("button",oe,[x(h,{to:"/register",class:"text-accent underline"},{default:b(()=>[g(" Register ")]),_:1})]),g(" or "),e("button",{class:"text-accent underline",onClick:I}," Try a different login ")])])):m("",!0)])):m("",!0)])}}}),de=D(se,[["__scopeId","data-v-df62786d"]]);export{de as default};
