import{_ as M}from"./nuxt-link.1dfe2cb3.js";import U from"./Icon.8fb0f34d.js";import{d as B,W as D,r as c,E as L,o as G,b as o,c as a,e,N as u,f as d,t as x,G as I,w as f,C as b,g as h,X as H,Y as y,Z as S,$,a0 as q}from"./entry.9d1d6f43.js";const z={class:"flex items-center h-36 w-36 z-50"},A=["src"],E={class:"text-base-200 text-lg mb-1"},J={class:"ml-4"},K={key:0,class:"flex flex-col items-center bg-base-200 p-4 rounded-2xl shadow-lg transition-all duration-300 absolute top-36 left-0"},O={key:0,class:"text-center text-info"},T=e("div",null,"Loading, please wait...",-1),W={key:1,class:"text-center"},j={class:"mb-4"},P={class:"text-lg font-semibold"},R=["autocomplete","onSubmit"],X=e("label",{for:"login",class:"block text-sm mb-1"},"Login:",-1),Y=e("label",{for:"password",class:"block text-sm mb-1"},"Password:",-1),Z={class:"flex items-center justify-between"},F=e("label",{for:"stayLoggedIn",class:"text-sm"},"Stay Logged in",-1),Q=e("button",{type:"submit",class:"bg-info text-default py-1 px-3 rounded"},"Login",-1),ee={class:"text-center mt-2"},te={key:3,class:"text-warning mt-2"},ne=B({__name:"avatar-banner",setup(se){const t=D(),m=c(""),p=c(""),g=c(!1),n=c(""),_=L(()=>t.isLoggedIn),r=c(!0),V=L(()=>_.value?`Hello, ${t.username} ðŸŽ‰`:"Welcome, Kind Guest"),w=()=>{g.value=!g.value},C=async()=>{n.value="";try{const s=await t.login({username:m.value,password:p.value});s.success?r.value&&localStorage.setItem("user",JSON.stringify({username:m.value})):n.value=s.message}catch(s){n.value=q(s).message}},N=()=>{t.logout(),r.value||localStorage.removeItem("user")};return G(()=>{const s=JSON.parse(localStorage.getItem("user")||"null");s&&s.username!=="Kind Guest"&&t.setUser(s)}),(s,l)=>{const v=M,k=U;return o(),a("div",z,[e("div",{class:"flex flex-col items-start cursor-pointer",onClick:w},[u(t).avatarImage?(o(),a("img",{key:0,src:u(t).avatarImage,class:"w-8 h-8 rounded-full mb-2",alt:"Avatar"},null,8,A)):d("",!0),e("span",E,x(V.value),1),_.value?(o(),I(v,{key:1,to:"/dashboard",class:"text-accent underline text-sm"},{default:f(()=>[b(" Dashboard ")]),_:1})):d("",!0),_.value&&u(t).role==="admin"?(o(),I(v,{key:2,to:"/admin",class:"text-accent underline text-sm mt-1"},{default:f(()=>[b(" Admin ")]),_:1})):d("",!0)]),e("div",J,[h(k,{name:"tabler:user",class:"text-base-200 text-2xl cursor-pointer",onClick:w})]),g.value?(o(),a("div",K,[u(t).loading?(o(),a("div",O,[h(k,{name:"tabler:loader",class:"animate-spin text-lg mb-2"}),T])):_.value?(o(),a("div",W,[e("div",j,[e("span",P,"Hello, "+x(u(t).username)+" ðŸŽ‰",1)]),e("button",{class:"bg-warning text-default py-1 px-3 rounded",onClick:N}," Logout ")])):(o(),a("form",{key:2,class:"space-y-4 z-50",autocomplete:r.value?"on":"off",onSubmit:H(C,["prevent"])},[e("div",null,[X,y(e("input",{id:"login","onUpdate:modelValue":l[0]||(l[0]=i=>m.value=i),type:"text",autocomplete:"username",class:"w-full p-2 border rounded",required:""},null,512),[[S,m.value]])]),e("div",null,[Y,y(e("input",{id:"password","onUpdate:modelValue":l[1]||(l[1]=i=>p.value=i),type:"password",autocomplete:"current-password",class:"w-full p-2 border rounded",required:""},null,512),[[S,p.value]])]),e("div",Z,[e("div",null,[y(e("input",{id:"stayLoggedIn","onUpdate:modelValue":l[2]||(l[2]=i=>r.value=i),type:"checkbox",class:"mr-2"},null,512),[[$,r.value]]),F]),Q]),e("div",ee,[h(v,{to:"/register",class:"text-accent underline"},{default:f(()=>[b("Register")]),_:1})])],40,R)),n.value?(o(),a("div",te,x(n.value),1)):d("",!0)])):d("",!0)])}}});export{ne as default};
