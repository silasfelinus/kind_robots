import T from"./BWBek36E.js";import{_ as O}from"./BNBFR6TF.js";import{d as B,W as A,X as D,r as u,E as I,o as G,c as o,e as l,f as e,N as m,g,h as b,t as y,G as N,w,k,Y as H,Z as L,$ as E,a0 as K,a1 as V,p as W,j as $,l as j}from"./Bh_OSRoe.js";import"./Bm4K94d7.js";import"./CwLGbeD0.js";const r=p=>(W("data-v-0e64ac08"),p=p(),$(),p),q={class:"flex items-center h-36 w-36 z-50"},z=["src"],J={class:"ml-2"},P={key:0,class:"flex flex-col items-center p-4 rounded-2xl shadow-lg transition-all duration-300"},X={key:0,class:"text-center text-info"},Y=r(()=>e("div",null,"Loading, please wait...",-1)),Z={key:1,class:"text-center"},F={class:"mb-4"},Q={class:"text-lg font-semibold"},ee=["autocomplete"],te={class:"mb-2 relative group"},se=r(()=>e("label",{for:"login",class:"block text-sm mb-1"},"Login:",-1)),oe=r(()=>e("div",{class:"absolute right-2 bottom-2 text-xs text-gray-500 group-hover:float-tooltip"}," Login ",-1)),ae={class:"mb-2 relative group"},le=r(()=>e("label",{for:"password",class:"block text-sm mb-1"},"Password:",-1)),re=r(()=>e("div",{class:"absolute right-2 bottom-2 text-xs text-gray-500 group-hover:float-tooltip"}," Password ",-1)),ne={class:"flex items-center justify-between"},ie=r(()=>e("label",{for:"stayLoggedIn",class:"text-sm"},"Stay Logged in",-1)),ce=r(()=>e("button",{type:"submit",class:"bg-info text-default py-1 px-3 rounded"}," Login ",-1)),de={class:"text-center mt-2"},ue={key:3,class:"text-warning mt-2"},me=B({__name:"LoginToggle",setup(p){const s=A(),v=D(),_=u(""),f=u(""),x=u(!1),n=u(""),i=I(()=>s.isLoggedIn),c=u(!0),U=I(()=>i.value?`Hello, ${s.username} ðŸŽ‰`:"Welcome, Kind Guest"),M=()=>{x.value=!x.value},R=async()=>{n.value="";try{const t=await s.login({username:_.value,password:f.value});t.success?c.value&&localStorage.setItem("user",JSON.stringify({username:_.value})):(v.setError(V.AUTH_ERROR,t.message),n.value=t.message)}catch(t){const a=t instanceof Error?t.message:String(t);v.setError(V.UNKNOWN_ERROR,a),n.value=v.message||""}},C=()=>{s.logout(),c.value||localStorage.removeItem("user")};return G(()=>{const t=JSON.parse(localStorage.getItem("user")||"null");t&&t.username!=="Kind Guest"&&s.setUser(t)}),(t,a)=>{const S=T,h=O;return o(),l("div",q,[e("div",{class:"flex items-center cursor-pointer",onClick:M},[m(s).avatarImage?(o(),l("img",{key:0,src:m(s).avatarImage,class:"w-8 h-8 rounded-full mr-2",alt:"Avatar"},null,8,z)):g("",!0),b(S,{name:"tabler:home",class:"text-2xl"}),e("span",J,y(U.value),1),i.value&&m(s).role==="admin"?(o(),N(h,{key:1,to:"/admin",class:"ml-2 underline"},{default:w(()=>[k(" Admin ")]),_:1})):g("",!0),i.value?(o(),N(h,{key:2,to:"/dashboard",class:"ml-2 underline"},{default:w(()=>[k(" Dashboard ")]),_:1})):g("",!0)]),x.value&&!i.value?(o(),l("div",P,[m(s).loading?(o(),l("div",X,[b(S,{name:"tabler:loader",class:"animate-spin text-lg mb-2"}),Y])):i.value?(o(),l("div",Z,[e("div",F,[e("span",Q,"Hello, "+y(m(s).username)+" ðŸŽ‰",1),e("button",{class:"bg-warning text-default py-1 px-3 rounded",onClick:C}," Logout ")])])):(o(),l("form",{key:2,class:"space-y-4 z-50",autocomplete:c.value?"on":"off",onSubmit:H(R,["prevent"])},[e("div",te,[se,L(e("input",{id:"login","onUpdate:modelValue":a[0]||(a[0]=d=>_.value=d),type:"text",autocomplete:"username",class:"w-full p-2 border rounded",required:""},null,512),[[E,_.value]]),oe]),e("div",ae,[le,L(e("input",{id:"password","onUpdate:modelValue":a[1]||(a[1]=d=>f.value=d),type:"password",autocomplete:"current-password",class:"w-full p-2 border rounded",required:""},null,512),[[E,f.value]]),re]),e("div",ne,[e("div",null,[L(e("input",{id:"stayLoggedIn","onUpdate:modelValue":a[2]||(a[2]=d=>c.value=d),type:"checkbox",class:"mr-2"},null,512),[[K,c.value]]),ie]),ce]),e("div",de,[b(h,{to:"/register",class:"text-accent underline"},{default:w(()=>[k(" Register ")]),_:1})])],40,ee)),n.value?(o(),l("div",ue,y(n.value),1)):g("",!0)])):g("",!0)])}}}),xe=j(me,[["__scopeId","data-v-0e64ac08"]]);export{xe as default};
