import{d as N,a1 as C,a2 as I,r as l,o as U,c as n,e as r,f as e,h as v,N as h,t as w,Y as P,W as x,X as y,a3 as M,w as O,k as T,g as k,a4 as R,a0 as B,E as j,p as q,j as A,l as D}from"./NJWOSLyt.js";const o=u=>(q("data-v-89f451a9"),u=u(),A(),u),G={class:"relative flex items-center h-36 w-36"},H=o(()=>e("span",{class:"ml-2 text-base-200"},"Login",-1)),J={key:0,class:"absolute top-4 left-1/2 transform -translate-x-1/2 bg-base-200 p-4 rounded-2xl shadow-lg transition-all duration-300"},K={key:0,class:"text-center text-info"},W=o(()=>e("div",null,"Loading, please wait...",-1)),X={key:1,class:"text-center"},Y={class:"mb-4"},$={class:"text-lg font-semibold"},z=["autocomplete"],F={class:"mb-2 relative group"},Q=o(()=>e("label",{for:"login",class:"block text-sm mb-1"},"Login:",-1)),Z=o(()=>e("div",{class:"absolute right-2 bottom-2 text-xs text-gray-500 group-hover:float-tooltip"}," Login ",-1)),ee={class:"mb-2 relative group"},te=o(()=>e("label",{for:"password",class:"block text-sm mb-1"},"Password:",-1)),se=o(()=>e("div",{class:"absolute right-2 bottom-2 text-xs text-gray-500 group-hover:float-tooltip"}," Password ",-1)),oe={class:"flex items-center justify-between"},ae=o(()=>e("label",{for:"savePassword",class:"text-sm"},"Save Password",-1)),le=o(()=>e("button",{type:"submit",class:"bg-info text-default py-1 px-3 rounded"}," Login ",-1)),ne={class:"text-center mt-2"},re={key:3,class:"text-warning mt-2"},ie=N({__name:"OldLogin",setup(u){const a=C(),f=I(),p=l(""),_=l(""),m=l(!0),g=l(!0),i=l(""),c=l(a.username!==null&&a.username!=="Kind Guest"),L=()=>{g.value=!g.value},S=async()=>{i.value="";try{const s=await a.login(p.value,_.value);s.success?c.value=!0:i.value=s.message}catch(s){f.setError(R.AUTH_ERROR,s),i.value=f.message||"An unexpected error occurred."}},V=()=>{a.logout(),c.value=!1};return U(()=>{const s=localStorage.getItem("user");if(s){const t=JSON.parse(s);t&&t.username!=="Kind Guest"&&(a.setUser(t),c.value=!0)}window.addEventListener("login-success",t=>{t instanceof CustomEvent&&t.detail.user&&(localStorage.setItem("user",JSON.stringify(t.detail.user)),c.value=!0)})}),(s,t)=>{const b=B,E=j;return n(),r("div",G,[e("div",{class:"flex items-center cursor-pointer",onClick:L},[v(b,{name:"tabler:login",class:"text-base-200 text-2xl",title:"Toggle Login"}),H]),g.value?(n(),r("div",J,[h(a).loading?(n(),r("div",K,[v(b,{name:"tabler:loader",class:"animate-spin text-lg mb-2"}),W])):c.value?(n(),r("div",X,[e("div",Y,[e("span",$,"Hello, "+w(h(a).username)+" ðŸŽ‰",1)]),e("button",{class:"bg-warning text-default py-1 px-3 rounded",onClick:V}," Logout ")])):(n(),r("form",{key:2,class:"space-y-4",autocomplete:m.value?"on":"off",onSubmit:P(S,["prevent"])},[e("div",F,[Q,x(e("input",{id:"login","onUpdate:modelValue":t[0]||(t[0]=d=>p.value=d),type:"text",autocomplete:"username",class:"w-full p-2 border rounded",required:""},null,512),[[y,p.value]]),Z]),e("div",ee,[te,x(e("input",{id:"password","onUpdate:modelValue":t[1]||(t[1]=d=>_.value=d),type:"password",autocomplete:"current-password",class:"w-full p-2 border rounded",required:""},null,512),[[y,_.value]]),se]),e("div",oe,[e("div",null,[x(e("input",{id:"savePassword","onUpdate:modelValue":t[2]||(t[2]=d=>m.value=d),type:"checkbox",class:"mr-2"},null,512),[[M,m.value]]),ae]),le]),e("div",ne,[v(E,{to:"/register",class:"text-accent underline"},{default:O(()=>[T(" Register ")]),_:1})])],40,z)),i.value?(n(),r("div",re,w(i.value),1)):k("",!0)])):k("",!0)])}}}),de=D(ie,[["__scopeId","data-v-89f451a9"]]);export{de as default};
