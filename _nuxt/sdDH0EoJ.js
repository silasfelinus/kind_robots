import O from"./CzI6pVEy.js";import{_ as M}from"./DfUZz_zp.js";import{d as B,X as H,Y as T,r as g,G as I,o as A,c as o,e as a,f as e,O as l,g as m,h as b,t as h,H as S,w as y,k as w,Z as D,$ as k,a0 as N,a1 as G,a2 as V,p as K,j as W,l as $}from"./7SNmuExf.js";const n=_=>(K("data-v-82217b4f"),_=_(),W(),_),j={class:"flex items-center h-36 w-36 z-50"},q=["src"],z={class:"ml-2 text-base-200"},J={key:0,class:"flex flex-col items-center bg-base-200 p-4 rounded-2xl shadow-lg transition-all duration-300"},P={key:0,class:"text-center text-info"},X=n(()=>e("div",null,"Loading, please wait...",-1)),Y={key:1,class:"text-center"},Z={class:"mb-4"},F={class:"text-lg font-semibold"},Q=["autocomplete"],ee={class:"mb-2 relative group"},te=n(()=>e("label",{for:"login",class:"block text-sm mb-1"},"Login:",-1)),se=n(()=>e("div",{class:"absolute right-2 bottom-2 text-xs text-gray-500 group-hover:float-tooltip"}," Login ",-1)),oe={class:"mb-2 relative group"},ae=n(()=>e("label",{for:"password",class:"block text-sm mb-1"},"Password:",-1)),le=n(()=>e("div",{class:"absolute right-2 bottom-2 text-xs text-gray-500 group-hover:float-tooltip"}," Password ",-1)),ne={class:"flex items-center justify-between"},re=n(()=>e("label",{for:"stayLoggedIn",class:"text-sm"},"Stay Logged in",-1)),ie=n(()=>e("button",{type:"submit",class:"bg-info text-default py-1 px-3 rounded"}," Login ",-1)),ce={class:"text-center mt-2"},de={key:3,class:"text-warning mt-2"},ue=B({__name:"LoginWindow",setup(_){const t=H(),i=T(),p=g(""),v=g(""),x=g(!1),c=I(()=>t.isLoggedIn),d=g(!0),E=I(()=>c.value?`Hello, ${t.username} ðŸŽ‰`:"Welcome, Kind Guest"),U=()=>{x.value=!x.value},R=async()=>{i.clearError();try{const s=await t.login({username:p.value,password:v.value});s.success?d.value&&localStorage.setItem("user",JSON.stringify({username:p.value})):i.setError(V.AUTH_ERROR,s.message)}catch(s){i.setError(V.UNKNOWN_ERROR,s)}},C=()=>{t.logout(),d.value||localStorage.removeItem("user")};return A(()=>{const s=JSON.parse(localStorage.getItem("user")||"null");s&&s.username!=="Kind Guest"&&t.setUser(s)}),(s,r)=>{const L=O,f=M;return o(),a("div",j,[e("div",{class:"flex items-center cursor-pointer",onClick:U},[l(t).avatarImage?(o(),a("img",{key:0,src:l(t).avatarImage,class:"w-8 h-8 rounded-full mr-2",alt:"Avatar"},null,8,q)):m("",!0),b(L,{name:"tabler:home",class:"text-base-200 text-2xl"}),e("span",z,h(E.value),1),c.value&&l(t).role==="admin"?(o(),S(f,{key:1,to:"/admin",class:"ml-2 text-accent underline"},{default:y(()=>[w("Admin")]),_:1})):m("",!0),c.value?(o(),S(f,{key:2,to:"/dashboard",class:"ml-2 text-accent underline"},{default:y(()=>[w(" Dashboard ")]),_:1})):m("",!0)]),x.value&&!c.value?(o(),a("div",J,[l(t).loading?(o(),a("div",P,[b(L,{name:"tabler:loader",class:"animate-spin text-lg mb-2"}),X])):c.value?(o(),a("div",Y,[e("div",Z,[e("span",F," Hello, "+h(l(t).username)+" ðŸŽ‰ ",1),e("button",{class:"bg-warning text-default py-1 px-3 rounded",onClick:C}," Logout ")])])):(o(),a("form",{key:2,class:"space-y-4 z-50",autocomplete:d.value?"on":"off",onSubmit:D(R,["prevent"])},[e("div",ee,[te,k(e("input",{id:"login","onUpdate:modelValue":r[0]||(r[0]=u=>p.value=u),type:"text",autocomplete:"username",class:"w-full p-2 border rounded",required:""},null,512),[[N,p.value]]),se]),e("div",oe,[ae,k(e("input",{id:"password","onUpdate:modelValue":r[1]||(r[1]=u=>v.value=u),type:"password",autocomplete:"current-password",class:"w-full p-2 border rounded",required:""},null,512),[[N,v.value]]),le]),e("div",ne,[e("div",null,[k(e("input",{id:"stayLoggedIn","onUpdate:modelValue":r[2]||(r[2]=u=>d.value=u),type:"checkbox",class:"mr-2"},null,512),[[G,d.value]]),re]),ie]),e("div",ce,[b(f,{to:"/register",class:"text-accent underline"},{default:y(()=>[w(" Register ")]),_:1})])],40,Q)),l(i).message?(o(),a("div",de,h(l(i).message),1)):m("",!0)])):m("",!0)])}}}),ge=$(ue,[["__scopeId","data-v-82217b4f"]]);export{ge as default};
