import{r as i,aT as x,a2 as y,I as w,c as o,e as n,W as _,X as E,f as s,F as T,a9 as R,t as g,aU as D,g as v,aV as h,a4 as M}from"./pZiLMi_1.js";const O={class:"bg-base p-8"},V={class:"space-y-4"},C={class:"label-text capitalize"},I=["onUpdate:modelValue","type","min","step","max"],N={class:"mt-4 text-xl"},U={key:0,class:"mt-4"},F=s("div",{class:"loader"},null,-1),B=[F],j={key:1,class:"mt-4"},z=["src"],W={__name:"MakeArt",setup(A){const u=i(""),r=x(),f=y(),c=i(null),d=i(!1),b=w(()=>r.message),l=i({seed:-1,sampler_name:"DDIM",batch_size:1,n_iter:1,steps:20,cfg_scale:7,width:512,height:512}),S=async()=>{var m,a;try{d.value=!0,r.setStatus(h.INFO,"Submitting your text...");const e={text:u.value,settings:l.value},t=await fetch("https://cafefred.purrsalon.com/sdapi/v1/txt2img",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`API error: ${t.statusText}`);const p=await t.json();c.value=`data:image/png;base64,${p.images[0]}`,r.setStatus(h.SUCCESS,"Successfully submitted!")}catch(e){console.error(e);const t=((a=(m=e.response)==null?void 0:m.data)==null?void 0:a.message)||e.message||"Failed to submit text";f.handleError(()=>{throw e},M.NETWORK_ERROR,t),r.setStatus(h.ERROR,t)}finally{d.value=!1}};return(m,a)=>(o(),n("div",O,[_(s("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>u.value=e),class:"input input-bordered w-full mb-4",placeholder:"Enter your text here"},null,512),[[E,u.value]]),s("div",V,[(o(!0),n(T,null,R(l.value,(e,t)=>(o(),n("div",{key:t,class:"label"},[s("span",C,g(t)+":",1),_(s("input",{"onUpdate:modelValue":p=>l.value[t]=p,type:typeof e,class:"input input-bordered",min:t==="width"||t==="height"?256:void 0,step:t==="width"||t==="height"?64:void 0,max:t==="width"||t==="height"?1024:void 0},null,8,I),[[D,l.value[t]]])]))),128))]),s("button",{class:"btn btn-primary mt-4",onClick:S},"Submit"),s("p",N,g(b.value),1),d.value?(o(),n("div",U,B)):v("",!0),c.value?(o(),n("div",j,[s("img",{src:c.value,alt:"Generated Image",class:"max-w-full h-auto"},null,8,z)])):v("",!0)]))}};export{W as default};
