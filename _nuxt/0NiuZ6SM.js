import{d as x,aO as S,Z as R,$ as b,r as k,H as u,c as s,e as o,f as c,F as M,a5 as N,n as C,k as T,t as d,g as f,M as A,a1 as n}from"./CH0slHa8.js";import{u as I}from"./BYEQz_1M.js";const L={class:"flex flex-col items-center space-y-8"},O={class:"flex flex-wrap"},D=["onClick"],G={key:0},B={key:0,class:"flex items-center space-x-4"},U=x({__name:"PitchTagSelector",setup(F){const r=S(),l=R(),i=b(),E=I(),p=k(!0),t=u(()=>r.selectedPitch),w=e=>{r.selectPitch(e)},m=u(()=>r.pitches),g=u(()=>m.value.filter(e=>!!(l.userId===e.userId||p.value&&e.isPublic||E.showMature&&e.isMature))),y=async()=>{try{await i.handleError(async()=>{if(t.value){const e=t.value.isMature??!1;await r.updatePitch(t.value.id,{isMature:!e})}},n.GENERAL_ERROR,"Error toggling pitch Mature")}catch(e){console.error("Error in togglePitchMature:",e)}},P=async()=>{try{await i.handleError(async()=>{const e=prompt("Enter the title for the new pitch:");e&&await r.addPitch(e,l.userId)},n.GENERAL_ERROR,"Error adding new pitch")}catch(e){console.error("Error in addNewPitch:",e)}},_=async()=>{try{await i.handleError(async()=>{if(t.value){const e=prompt("Enter new title for the pitch:");e&&await r.editPitchTitle(t.value.id,e)}},n.GENERAL_ERROR,"Error editing pitch title")}catch(e){console.error("Error in editSelectedPitch:",e)}},v=async()=>{try{await i.handleError(async()=>{t.value&&t.value.id!==null&&confirm("Are you sure you want to delete your pitch?")&&await r.deletePitch(t.value.id)},n.GENERAL_ERROR,"Error deleting pitch")}catch(e){console.error("Error in deleteSelectedPitch:",e)}};return(e,V)=>(s(),o("div",L,[c("div",O,[(s(!0),o(M,null,N(g.value,a=>{var h;return s(),o("button",{key:a.id,class:C([((h=t.value)==null?void 0:h.id)===a.id?"bg-primary text-white":"bg-base-200","rounded-2xl border p-2 m-2"]),onClick:H=>w(a.id)},[T(d(a.title)+" ",1),a.username?(s(),o("span",G,"("+d(a.username)+")",1)):f("",!0)],10,D)}),128))]),t.value&&A(l).userId===t.value.userId?(s(),o("div",B,[c("button",{class:"bg-warning text-white rounded-2xl p-2",onClick:_}," Edit "),c("button",{class:"bg-info text-white rounded-2xl p-2",onClick:v}," Delete "),c("button",{class:"bg-accent text-white rounded-2xl p-2",onClick:y},d(t.value.isMature?"Hide":"Show")+" Mature ",1)])):f("",!0),c("button",{class:"bg-success text-white rounded-2xl p-2",onClick:P}," Add New Pitch ")]))}});export{U as default};
