import E from"./rqtZmSiP.js";import{_ as N}from"./BBxmey6X.js";import{d as R,Z as V,$ as U,r as f,H as C,c as i,e as d,M as l,h as x,g,X as T,f as e,V as v,W as b,a0 as M,w as y,k as m,t as B,a1 as w,p as O,j,l as D}from"./CH0slHa8.js";const o=c=>(O("data-v-d687fb45"),c=c(),j(),c),F={class:"flex flex-col items-center p-4 rounded-2xl shadow-lg transition-all duration-300 w-full max-w-md mx-auto"},H={key:0,class:"text-center text-info"},P=o(()=>e("div",null,"Loading, please wait...",-1)),W=["autocomplete"],$={class:"mb-2 relative group"},q=o(()=>e("label",{for:"login",class:"block text-sm mb-1"},"Login:",-1)),A=o(()=>e("div",{class:"absolute right-2 bottom-2 text-xs text-gray-500 group-hover:float-tooltip"}," Login ",-1)),K={class:"mb-2 relative group"},X=o(()=>e("label",{for:"password",class:"block text-sm mb-1"},"Password (optional):",-1)),Z=o(()=>e("div",{class:"absolute right-2 bottom-2 text-xs text-gray-500 group-hover:float-tooltip"}," Password (optional) ",-1)),z={class:"flex items-center justify-between"},G=o(()=>e("label",{for:"stayLoggedIn",class:"text-sm"},"Stay Logged in",-1)),J=o(()=>e("button",{type:"submit",class:"bg-info text-default py-1 px-3 rounded"}," Login ",-1)),Q={class:"text-center mt-2"},Y={key:2,class:"text-warning mt-2 w-full text-center"},ee={key:0},te={class:"mt-2"},oe={class:"text-accent underline"},se=R({__name:"LoginForm",setup(c){const t=V(),s=U(),u=f(""),_=f(""),L=C(()=>t.isLoggedIn),p=f(!1),k=async()=>{s.clearError(),p.value=!1;try{const a=await t.login(u.value,_.value||"");a.success&&t.stayLoggedIn?t.setStayLoggedIn(!0):(s.setError(w.AUTH_ERROR,a.message),a.message.includes("User not found")&&(p.value=!0))}catch(a){s.setError(w.UNKNOWN_ERROR,a)}},I=()=>{u.value="",_.value="",s.clearError(),p.value=!1};return(a,n)=>{const S=E,h=N;return i(),d("div",F,[l(t).loading?(i(),d("div",H,[x(S,{name:"tabler:loader",class:"animate-spin text-lg mb-2"}),P])):g("",!0),L.value?g("",!0):(i(),d("form",{key:1,class:"space-y-4 w-full",autocomplete:l(t).stayLoggedIn?"on":"off",onSubmit:T(k,["prevent"])},[e("div",$,[q,v(e("input",{id:"login","onUpdate:modelValue":n[0]||(n[0]=r=>u.value=r),type:"text",autocomplete:"username",class:"w-full p-2 border rounded",required:""},null,512),[[b,u.value]]),A]),e("div",K,[X,v(e("input",{id:"password","onUpdate:modelValue":n[1]||(n[1]=r=>_.value=r),type:"password",autocomplete:"current-password",class:"w-full p-2 border rounded"},null,512),[[b,_.value]]),Z]),e("div",z,[e("div",null,[v(e("input",{id:"stayLoggedIn","onUpdate:modelValue":n[2]||(n[2]=r=>l(t).stayLoggedIn=r),type:"checkbox",class:"mr-2"},null,512),[[M,l(t).stayLoggedIn]]),G]),J]),e("div",Q,[x(h,{to:"/register",class:"text-accent underline"},{default:y(()=>[m(" Register ")]),_:1})])],40,W)),l(s).message?(i(),d("div",Y,[m(B(l(s).message)+" ",1),p.value?(i(),d("div",ee,[e("div",te,[e("button",oe,[x(h,{to:"/register",class:"text-accent underline"},{default:y(()=>[m(" Register ")]),_:1})]),m(" or "),e("button",{class:"text-accent underline",onClick:I}," Try a different login ")])])):g("",!0)])):g("",!0)])}}}),re=D(se,[["__scopeId","data-v-d687fb45"]]);export{re as default};
